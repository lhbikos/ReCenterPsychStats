!function t(e,n,r){var o="function"==typeof hypothesisRequire&&hypothesisRequire;function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof hypothesisRequire&&hypothesisRequire;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){var n=e[a][1][t];return i(n||t)}),c,c.exports,t,e,n,r)}return n[a].exports}for(var a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){function r(t){return!0}e.exports=function(t,e){var n=[];e=e||r;do{n.push(t),t=t.parentNode}while(t&&t.tagName&&e(t));return n.slice(1)}},{}],2:[function(t,e,n){(function(t){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var i=typeof o;if("string"===i||"number"===i)t.push(o);else if(Array.isArray(o)&&o.length){var a=r.apply(null,o);a&&t.push(a)}else if("object"===i)for(var s in o)n.call(o,s)&&o[s]&&t.push(s)}}return t.join(" ")}void 0!==e&&e.exports?(r.default=r,e.exports=r):"function"==typeof t&&"object"==typeof t.amd&&t.amd?t("classnames",[],(function(){return r})):window.classNames=r}()}).call(this,void 0)},{}],3:[function(t,e,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?n:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,window)},{}],4:[function(t,e,n){function r(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var o=-1;r.Diff,r.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var i=n,a=this.diff_commonPrefix(t,e),s=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var u=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var l=this.diff_compute_(t,e,i,o);return s&&l.unshift([0,s]),u&&l.push([0,u]),this.diff_cleanupMerge(l),l},r.prototype.diff_compute_=function(t,e,n,r){var i;if(!t)return[[1,e]];if(!e)return[[o,t]];var a=t.length>e.length?t:e,s=t.length>e.length?e:t,u=a.indexOf(s);if(-1!=u)return i=[[1,a.substring(0,u)],[0,s],[1,a.substring(u+s.length)]],t.length>e.length&&(i[0][0]=i[2][0]=o),i;if(1==s.length)return[[o,t],[1,e]];var l=this.diff_halfMatch_(t,e);if(l){var c=l[0],f=l[1],h=l[2],d=l[3],p=l[4],g=this.diff_main(c,h,n,r),v=this.diff_main(f,d,n,r);return g.concat([[0,p]],v)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},r.prototype.diff_lineMode_=function(t,e,n){t=(f=this.diff_linesToChars_(t,e)).chars1,e=f.chars2;var r=f.lineArray,i=this.diff_main(t,e,!1,n);this.diff_charsToLines_(i,r),this.diff_cleanupSemantic(i),i.push([0,""]);for(var a=0,s=0,u=0,l="",c="";a<i.length;){switch(i[a][0]){case 1:u++,c+=i[a][1];break;case o:s++,l+=i[a][1];break;case 0:if(s>=1&&u>=1){i.splice(a-s-u,s+u),a=a-s-u;for(var f,h=(f=this.diff_main(l,c,!1,n)).length-1;h>=0;h--)i.splice(a,0,f[h]);a+=f.length}u=0,s=0,l="",c=""}a++}return i.pop(),i},r.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,i=e.length,a=Math.ceil((r+i)/2),s=a,u=2*a,l=new Array(u),c=new Array(u),f=0;f<u;f++)l[f]=-1,c[f]=-1;l[s+1]=0,c[s+1]=0;for(var h=r-i,d=h%2!=0,p=0,g=0,v=0,y=0,m=0;m<a&&!((new Date).getTime()>n);m++){for(var b=-m+p;b<=m-g;b+=2){for(var _=s+b,w=(T=b==-m||b!=m&&l[_-1]<l[_+1]?l[_+1]:l[_-1]+1)-b;T<r&&w<i&&t.charAt(T)==e.charAt(w);)T++,w++;if(l[_]=T,T>r)g+=2;else if(w>i)p+=2;else if(d&&(E=s+h-b)>=0&&E<u&&-1!=c[E]&&T>=(S=r-c[E]))return this.diff_bisectSplit_(t,e,T,w,n)}for(var O=-m+v;O<=m-y;O+=2){for(var S,E=s+O,x=(S=O==-m||O!=m&&c[E-1]<c[E+1]?c[E+1]:c[E-1]+1)-O;S<r&&x<i&&t.charAt(r-S-1)==e.charAt(i-x-1);)S++,x++;if(c[E]=S,S>r)y+=2;else if(x>i)v+=2;else if(!d){var T;if((_=s+h-O)>=0&&_<u&&-1!=l[_])if(w=s+(T=l[_])-_,T>=(S=r-S))return this.diff_bisectSplit_(t,e,T,w,n)}}}return[[o,t],[1,e]]},r.prototype.diff_bisectSplit_=function(t,e,n,r,o){var i=t.substring(0,n),a=e.substring(0,r),s=t.substring(n),u=e.substring(r),l=this.diff_main(i,a,!1,o),c=this.diff_main(s,u,!1,o);return l.concat(c)},r.prototype.diff_linesToChars_=function(t,e){var n=[],r={};function o(t){for(var e="",o=0,i=-1,a=n.length;i<t.length-1;){-1==(i=t.indexOf("\n",o))&&(i=t.length-1);var s=t.substring(o,i+1);o=i+1,(r.hasOwnProperty?r.hasOwnProperty(s):void 0!==r[s])?e+=String.fromCharCode(r[s]):(e+=String.fromCharCode(a),r[s]=a,n[a++]=s)}return e}return n[0]="",{chars1:o(t),chars2:o(e),lineArray:n}},r.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],o=[],i=0;i<r.length;i++)o[i]=e[r.charCodeAt(i)];t[n][1]=o.join("")}},r.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(i,o)==e.substring(i,o)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},r.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(t.length-o,t.length-i)==e.substring(e.length-o,e.length-i)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},r.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var o=Math.min(n,r);if(t==e)return o;for(var i=0,a=1;;){var s=t.substring(o-a),u=e.indexOf(s);if(-1==u)return i;a+=u,0!=u&&t.substring(o-a)!=e.substring(0,a)||(i=a,a++)}},r.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var o=this;function i(t,e,n){for(var r,i,a,s,u=t.substring(n,n+Math.floor(t.length/4)),l=-1,c="";-1!=(l=e.indexOf(u,l+1));){var f=o.diff_commonPrefix(t.substring(n),e.substring(l)),h=o.diff_commonSuffix(t.substring(0,n),e.substring(0,l));c.length<h+f&&(c=e.substring(l-h,l)+e.substring(l,l+f),r=t.substring(0,n-h),i=t.substring(n+f),a=e.substring(0,l-h),s=e.substring(l+f))}return 2*c.length>=t.length?[r,i,a,s,c]:null}var a,s,u,l,c,f=i(n,r,Math.ceil(n.length/4)),h=i(n,r,Math.ceil(n.length/2));return f||h?(a=h?f&&f[4].length>h[4].length?f:h:f,t.length>e.length?(s=a[0],u=a[1],l=a[2],c=a[3]):(l=a[0],c=a[1],s=a[2],u=a[3]),[s,u,l,c,a[4]]):null},r.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,i=null,a=0,s=0,u=0,l=0,c=0;a<t.length;)0==t[a][0]?(n[r++]=a,s=l,u=c,l=0,c=0,i=t[a][1]):(1==t[a][0]?l+=t[a][1].length:c+=t[a][1].length,i&&i.length<=Math.max(s,u)&&i.length<=Math.max(l,c)&&(t.splice(n[r-1],0,[o,i]),t[n[r-1]+1][0]=1,r--,a=--r>0?n[r-1]:-1,s=0,u=0,l=0,c=0,i=null,e=!0)),a++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;){if(t[a-1][0]==o&&1==t[a][0]){var f=t[a-1][1],h=t[a][1],d=this.diff_commonOverlap_(f,h),p=this.diff_commonOverlap_(h,f);d>=p?(d>=f.length/2||d>=h.length/2)&&(t.splice(a,0,[0,h.substring(0,d)]),t[a-1][1]=f.substring(0,f.length-d),t[a+1][1]=h.substring(d),a++):(p>=f.length/2||p>=h.length/2)&&(t.splice(a,0,[0,f.substring(0,p)]),t[a-1][0]=1,t[a-1][1]=h.substring(0,h.length-p),t[a+1][0]=o,t[a+1][1]=f.substring(p),a++),a++}a++}},r.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),o=e.charAt(0),i=n.match(r.nonAlphaNumericRegex_),a=o.match(r.nonAlphaNumericRegex_),s=i&&n.match(r.whitespaceRegex_),u=a&&o.match(r.whitespaceRegex_),l=s&&n.match(r.linebreakRegex_),c=u&&o.match(r.linebreakRegex_),f=l&&t.match(r.blanklineEndRegex_),h=c&&e.match(r.blanklineStartRegex_);return f||h?5:l||c?4:i&&!s&&u?3:s||u?2:i||a?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var o=t[n-1][1],i=t[n][1],a=t[n+1][1],s=this.diff_commonSuffix(o,i);if(s){var u=i.substring(i.length-s);o=o.substring(0,o.length-s),i=u+i.substring(0,i.length-s),a=u+a}for(var l=o,c=i,f=a,h=e(o,i)+e(i,a);i.charAt(0)===a.charAt(0);){o+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var d=e(o,i)+e(i,a);d>=h&&(h=d,l=o,c=i,f=a)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=c,f?t[n+1][1]=f:(t.splice(n+1,1),n--))}n++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,i=null,a=0,s=!1,u=!1,l=!1,c=!1;a<t.length;)0==t[a][0]?(t[a][1].length<this.Diff_EditCost&&(l||c)?(n[r++]=a,s=l,u=c,i=t[a][1]):(r=0,i=null),l=c=!1):(t[a][0]==o?c=!0:l=!0,i&&(s&&u&&l&&c||i.length<this.Diff_EditCost/2&&s+u+l+c==3)&&(t.splice(n[r-1],0,[o,i]),t[n[r-1]+1][0]=1,r--,i=null,s&&u?(l=c=!0,r=0):(a=--r>0?n[r-1]:-1,l=c=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},r.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,i=0,a="",s="";n<t.length;)switch(t[n][0]){case 1:i++,s+=t[n][1],n++;break;case o:r++,a+=t[n][1],n++;break;case 0:r+i>1?(0!==r&&0!==i&&(0!==(e=this.diff_commonPrefix(s,a))&&(n-r-i>0&&0==t[n-r-i-1][0]?t[n-r-i-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),n++),s=s.substring(e),a=a.substring(e)),0!==(e=this.diff_commonSuffix(s,a))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),a=a.substring(0,a.length-e))),0===r?t.splice(n-i,r+i,[1,s]):0===i?t.splice(n-r,r+i,[o,a]):t.splice(n-r-i,r+i,[o,a],[1,s]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,a="",s=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),u=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(t)},r.prototype.diff_xIndex=function(t,e){var n,r=0,i=0,a=0,s=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),t[n][0]!==o&&(i+=t[n][1].length),!(r>e));n++)a=r,s=i;return t.length!=n&&t[n][0]===o?s:s+(e-a)},r.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,i=/>/g,a=/\n/g,s=0;s<t.length;s++){var u=t[s][0],l=t[s][1].replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(a,"&para;<br>");switch(u){case 1:e[s]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case o:e[s]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:e[s]="<span>"+l+"</span>"}}return e.join("")},r.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==o&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var a=t[i][0],s=t[i][1];switch(a){case 1:n+=s.length;break;case o:r+=s.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+Math.max(n,r)},r.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case o:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,i=0,a=e.split(/\t/g),s=0;s<a.length;s++){var u=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{n[r++]=[1,decodeURI(u)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var l=parseInt(u,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+u);var c=t.substring(i,i+=l);"="==a[s].charAt(0)?n[r++]=[0,c]:n[r++]=[o,c];break;default:if(a[s])throw new Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return n},r.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},r.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),o=this;function i(t,r){var i=t/e.length,a=Math.abs(n-r);return o.Match_Distance?i+a/o.Match_Distance:a?1:i}var a=this.Match_Threshold,s=t.indexOf(e,n);-1!=s&&(a=Math.min(i(0,s),a),-1!=(s=t.lastIndexOf(e,n+e.length))&&(a=Math.min(i(0,s),a)));var u,l,c=1<<e.length-1;s=-1;for(var f,h=e.length+t.length,d=0;d<e.length;d++){for(u=0,l=h;u<l;)i(d,n+l)<=a?u=l:h=l,l=Math.floor((h-u)/2+u);h=l;var p=Math.max(1,n-l+1),g=Math.min(n+l,t.length)+e.length,v=Array(g+2);v[g+1]=(1<<d)-1;for(var y=g;y>=p;y--){var m=r[t.charAt(y-1)];if(v[y]=0===d?(v[y+1]<<1|1)&m:(v[y+1]<<1|1)&m|(f[y+1]|f[y])<<1|1|f[y+1],v[y]&c){var b=i(d,y-1);if(b<=a){if(a=b,!((s=y-1)>n))break;p=Math.max(1,2*n-s)}}}if(i(d+1,n)>a)break;f=v}return s},r.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},r.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var o=e.substring(t.start2-r,t.start2);o&&t.diffs.unshift([0,o]);var i=e.substring(t.start2+t.length1,t.start2+t.length1+r);i&&t.diffs.push([0,i]),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+i.length,t.length2+=o.length+i.length}},r.prototype.patch_make=function(t,e,n){var i,a;if("string"==typeof t&&"string"==typeof e&&void 0===n)i=t,(a=this.diff_main(i,e,!0)).length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)a=t,i=this.diff_text1(a);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)i=t,a=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");i=t,a=n}if(0===a.length)return[];for(var s=[],u=new r.patch_obj,l=0,c=0,f=0,h=i,d=i,p=0;p<a.length;p++){var g=a[p][0],v=a[p][1];switch(l||0===g||(u.start1=c,u.start2=f),g){case 1:u.diffs[l++]=a[p],u.length2+=v.length,d=d.substring(0,f)+v+d.substring(f);break;case o:u.length1+=v.length,u.diffs[l++]=a[p],d=d.substring(0,f)+d.substring(f+v.length);break;case 0:v.length<=2*this.Patch_Margin&&l&&a.length!=p+1?(u.diffs[l++]=a[p],u.length1+=v.length,u.length2+=v.length):v.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(u,h),s.push(u),u=new r.patch_obj,l=0,h=d,c=f)}1!==g&&(c+=v.length),g!==o&&(f+=v.length)}return l&&(this.patch_addContext_(u,h),s.push(u)),s},r.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n],i=new r.patch_obj;i.diffs=[];for(var a=0;a<o.diffs.length;a++)i.diffs[a]=o.diffs[a].slice();i.start1=o.start1,i.start2=o.start2,i.length1=o.length1,i.length2=o.length2,e[n]=i}return e},r.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,i=[],a=0;a<t.length;a++){var s,u,l=t[a].start2+r,c=this.diff_text1(t[a].diffs),f=-1;if(c.length>this.Match_MaxBits?-1!=(s=this.match_main(e,c.substring(0,this.Match_MaxBits),l))&&(-1==(f=this.match_main(e,c.substring(c.length-this.Match_MaxBits),l+c.length-this.Match_MaxBits))||s>=f)&&(s=-1):s=this.match_main(e,c,l),-1==s)i[a]=!1,r-=t[a].length2-t[a].length1;else if(i[a]=!0,r=s-l,c==(u=-1==f?e.substring(s,s+c.length):e.substring(s,f+this.Match_MaxBits)))e=e.substring(0,s)+this.diff_text2(t[a].diffs)+e.substring(s+c.length);else{var h=this.diff_main(c,u,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(h)/c.length>this.Patch_DeleteThreshold)i[a]=!1;else{this.diff_cleanupSemanticLossless(h);for(var d,p=0,g=0;g<t[a].diffs.length;g++){var v=t[a].diffs[g];0!==v[0]&&(d=this.diff_xIndex(h,p)),1===v[0]?e=e.substring(0,s+d)+v[1]+e.substring(s+d):v[0]===o&&(e=e.substring(0,s+d)+e.substring(s+this.diff_xIndex(h,p+v[1].length))),v[0]!==o&&(p+=v[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),i]},r.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var o=t[0],i=o.diffs;if(0==i.length||0!=i[0][0])i.unshift([0,n]),o.start1-=e,o.start2-=e,o.length1+=e,o.length2+=e;else if(e>i[0][1].length){var a=e-i[0][1].length;i[0][1]=n.substring(i[0][1].length)+i[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}return 0==(i=(o=t[t.length-1]).diffs).length||0!=i[i.length-1][0]?(i.push([0,n]),o.length1+=e,o.length2+=e):e>i[i.length-1][1].length&&(a=e-i[i.length-1][1].length,i[i.length-1][1]+=n.substring(0,a),o.length1+=a,o.length2+=a),n},r.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);for(var a=i.start1,s=i.start2,u="";0!==i.diffs.length;){var l=new r.patch_obj,c=!0;for(l.start1=a-u.length,l.start2=s-u.length,""!==u&&(l.length1=l.length2=u.length,l.diffs.push([0,u]));0!==i.diffs.length&&l.length1<e-this.Patch_Margin;){var f=i.diffs[0][0],h=i.diffs[0][1];1===f?(l.length2+=h.length,s+=h.length,l.diffs.push(i.diffs.shift()),c=!1):f===o&&1==l.diffs.length&&0==l.diffs[0][0]&&h.length>2*e?(l.length1+=h.length,a+=h.length,c=!1,l.diffs.push([f,h]),i.diffs.shift()):(h=h.substring(0,e-l.length1-this.Patch_Margin),l.length1+=h.length,a+=h.length,0===f?(l.length2+=h.length,s+=h.length):c=!1,l.diffs.push([f,h]),h==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}u=(u=this.diff_text2(l.diffs)).substring(u.length-this.Patch_Margin);var d=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==d&&(l.length1+=d.length,l.length2+=d.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=d:l.diffs.push([0,d])),c||t.splice(++n,0,l)}}},r.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},r.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var s=n[i].match(a);if(!s)throw new Error("Invalid patch string: "+n[i]);var u=new r.patch_obj;for(e.push(u),u.start1=parseInt(s[1],10),""===s[2]?(u.start1--,u.length1=1):"0"==s[2]?u.length1=0:(u.start1--,u.length1=parseInt(s[2],10)),u.start2=parseInt(s[3],10),""===s[4]?(u.start2--,u.length2=1):"0"==s[4]?u.length2=0:(u.start2--,u.length2=parseInt(s[4],10)),i++;i<n.length;){var l=n[i].charAt(0);try{var c=decodeURI(n[i].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==l)u.diffs.push([o,c]);else if("+"==l)u.diffs.push([1,c]);else if(" "==l)u.diffs.push([0,c]);else{if("@"==l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+c)}i++}}return e},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case o:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},e.exports=r,e.exports.diff_match_patch=r,e.exports.DIFF_DELETE=o,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},{}],5:[function(t,e,n){e.exports=function(){var t=document.baseURI;if(!t)for(var e=document.getElementsByTagName("base"),n=0;n<e.length;n++)if(e[n].href){t=e[n].href;break}return t||document.documentURI}()},{}],6:[function(t,e,n){e.exports=t("./lib")},{"./lib":7}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');var n=t.ownerDocument.createRange(),r=e.startContainer,i=e.startOffset;n.setStart(t,0),n.setEnd(r,i);var a=(0,o.default)(n).length;return{start:a,end:a+(0,o.default)(e).length}},n.toRange=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===t)throw new Error('missing required parameter "root"');var n=t.ownerDocument,o=n.createRange(),i=n.createNodeIterator(t,4),a=e.start||0,s=e.end||a,u=a-(0,r.default)(i,a),l=i.referenceNode,c=s-a+u,f=c-(0,r.default)(i,c),h=i.referenceNode;return o.setStart(l,u),o.setEnd(h,f),o};var r=i(t("dom-seek")),o=i(t("./range-to-string"));function i(t){return t&&t.__esModule?t:{default:t}}},{"./range-to-string":8,"dom-seek":29}],8:[function(t,e,n){"use strict";function r(t,e){if(!e&&t.firstChild)return t.firstChild;do{if(t.nextSibling)return t.nextSibling;t=t.parentNode}while(t);return t}function o(t,e){for(var n=function(t){return t.startContainer.nodeType===Node.ELEMENT_NODE?t.startContainer.childNodes[t.startOffset]||r(t.startContainer,!0):t.startContainer}(t),o=function(t){return t.endContainer.nodeType===Node.ELEMENT_NODE?t.endContainer.childNodes[t.endOffset]||r(t.endContainer,!0):r(t.endContainer)}(t);n!==o;)e(n),n=r(n)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e="";return o(t,(function(n){if(n.nodeType===Node.TEXT_NODE){var r=n===t.startContainer?t.startOffset:0,o=n===t.endContainer?t.endOffset:n.textContent.length;e+=n.textContent.slice(r,o)}})),e}},{}],9:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./lib":10,dup:6}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');return u(t,a.fromRange(t,e))},n.fromTextPosition=u,n.toRange=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l(t,e,n);return null===r?null:a.toRange(t,r)},n.toTextPosition=l;var r,o=t("diff-match-patch"),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("dom-anchor-text-position"));var s=new RegExp("(.|[\r\n]){1,"+String(32)+"}","g");function u(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "selector"');var n=e.start;if(void 0===n)throw new Error('selector missing required property "start"');if(n<0)throw new Error('property "start" must be a non-negative integer');var r=e.end;if(void 0===r)throw new Error('selector missing required property "end"');if(r<0)throw new Error('property "end" must be a non-negative integer');var o=t.textContent.substr(n,r-n),i=Math.max(0,n-32),a=t.textContent.substr(i,n-i),s=Math.min(t.textContent.length,r+32);return{exact:o,prefix:a,suffix:t.textContent.substr(r,s-r)}}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "selector"');var r=e.exact;if(void 0===r)throw new Error('selector missing required property "exact"');var o=e.prefix,a=e.suffix,u=n.hint,l=new i.default;l.Match_Distance=2*t.textContent.length;var c=r.match(s),f=void 0===u?t.textContent.length/2|0:u,h=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,p=-1,g=void 0!==o,v=void 0!==a,y=!1;g&&(p=l.match_main(t.textContent,o,f))>-1&&(f=p+o.length,y=!0),v&&!y&&(p=l.match_main(t.textContent,a,f+r.length))>-1&&(f=p-r.length);var m=c.shift();if(!((p=l.match_main(t.textContent,m,f))>-1))return null;f=d=(h=p)+m.length;var b=function(e,n){if(!e)return null;var r=l.match_main(t.textContent,n,e.loc);return-1===r?null:(e.loc=r+n.length,e.start=Math.min(e.start,r),e.end=Math.max(e.end,r+n.length),e)};l.Match_Distance=64;var _=c.reduce(b,{start:h,end:d,loc:f});return _?{start:_.start,end:_.end}:null}},{"diff-match-patch":4,"dom-anchor-text-position":11}],11:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./lib":12,dup:6}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');var n=t.ownerDocument.createRange(),r=e.startContainer,o=e.startOffset;n.setStart(t,0),n.setEnd(r,o);var a=(0,i.default)(n).length;return{start:a,end:a+(0,i.default)(e).length}},n.toRange=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(void 0===t)throw new Error('missing required parameter "root"');var n=t.ownerDocument,i=n.createRange(),a=(0,r.default)(t,4),s=e.start||0,u=e.end||s,l=(0,o.default)(a,s),c=s-l;a.pointerBeforeReferenceNode?i.setStart(a.referenceNode,c):(i.setStart(a.nextNode(),c),a.previousNode());var f=u-s+c;return c=f-(l=(0,o.default)(a,f)),a.pointerBeforeReferenceNode?i.setEnd(a.referenceNode,c):i.setEnd(a.nextNode(),c),i};var r=a(t("dom-node-iterator")),o=a(t("dom-seek")),i=a(t("./range-to-string"));function a(t){return t&&t.__esModule?t:{default:t}}},{"./range-to-string":13,"dom-node-iterator":15,"dom-seek":24}],13:[function(t,e,n){"use strict";function r(t,e){if(!e&&t.firstChild)return t.firstChild;do{if(t.nextSibling)return t.nextSibling;t=t.parentNode}while(t);return t}function o(t,e){for(var n=function(t){return t.startContainer.nodeType===Node.ELEMENT_NODE?t.startContainer.childNodes[t.startOffset]||r(t.startContainer,!0):t.startContainer}(t),o=function(t){return t.endContainer.nodeType===Node.ELEMENT_NODE?t.endContainer.childNodes[t.endOffset]||r(t.endContainer,!0):r(t.endContainer)}(t);n!==o;)e(n),n=r(n)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e="";return o(t,(function(n){if(n.nodeType===Node.TEXT_NODE){var r=n===t.startContainer?t.startOffset:0,o=n===t.endContainer?t.endOffset:n.textContent.length;e+=n.textContent.slice(r,o)}})),e}},{}],14:[function(t,e,n){e.exports=t("./lib/implementation").default},{"./lib/implementation":18}],15:[function(t,e,n){e.exports=t("./lib").default,e.exports.getPolyfill=t("./polyfill"),e.exports.implementation=t("./implementation"),e.exports.shim=t("./shim")},{"./implementation":14,"./lib":19,"./polyfill":22,"./shim":23}],16:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=9==t.nodeType||t.ownerDocument,i=o.createNodeIterator(t,e,n,!1);return new r(i,t,e,n)};var r=function(){function t(e,n,r,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.root=n,this.whatToShow=r,this.filter=o,this.referenceNode=n,this.pointerBeforeReferenceNode=!0,this._iter=e}return t.prototype.nextNode=function(){var t=this._iter.nextNode();return this.pointerBeforeReferenceNode=!1,null===t?null:(this.referenceNode=t,this.referenceNode)},t.prototype.previousNode=function(){var t=this._iter.previousNode();return this.pointerBeforeReferenceNode=!0,null===t?null:(this.referenceNode=t,this.referenceNode)},t.prototype.toString=function(){return"[object NodeIterator]"},t}()},{}],17:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=t.ownerDocument;return r.createNodeIterator.call(r,t,e,n)}},{}],18:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return new r(t,e,n)};var r=function(){function t(e,n,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.root=e,this.whatToShow=n,this.filter=r,this.referenceNode=e,this.pointerBeforeReferenceNode=!0,this._filter=function(t){return!r||1===r(t)},this._show=function(t){return n>>t.nodeType-1&!0}}return t.prototype.nextNode=function(){var t=this.pointerBeforeReferenceNode;this.pointerBeforeReferenceNode=!1;var e=this.referenceNode;if(t&&this._show(e)&&this._filter(e))return e;do{if(e.firstChild)e=e.firstChild;else{do{if(e===this.root)return null;if(e.nextSibling)break;e=e.parentNode}while(e);e=e.nextSibling}}while(!this._show(e)||!this._filter(e));return this.referenceNode=e,this.pointerBeforeReferenceNode=!1,e},t.prototype.previousNode=function(){var t=this.pointerBeforeReferenceNode;this.pointerBeforeReferenceNode=!0;var e=this.referenceNode;if(!t&&this._show(e)&&this._filter(e))return e;do{if(e===this.root)return null;if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else e=e.parentNode}while(!this._show(e)||!this._filter(e));return this.referenceNode=e,this.pointerBeforeReferenceNode=!0,e},t.prototype.toString=function(){return"[object NodeIterator]"},t}()},{}],19:[function(t,e,n){"use strict";n.__esModule=!0;var r=a(t("./polyfill")),o=a(t("./implementation")),i=a(t("./shim"));function a(t){return t&&t.__esModule?t:{default:t}}var s=(0,r.default)();s.implementation=o.default,s.shim=i.default,n.default=s},{"./implementation":18,"./polyfill":20,"./shim":21}],20:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){try{var t="undefined"==typeof document?{}:document;return(0,o.default)(t,4294967295,null,!1).referenceNode===t?o.default:r.default}catch(t){return i.default}};var r=a(t("./adapter")),o=a(t("./builtin")),i=a(t("./implementation"));function a(t){return t&&t.__esModule?t:{default:t}}},{"./adapter":16,"./builtin":17,"./implementation":18}],21:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){var t="undefined"==typeof document?{}:document,e=(0,o.default)();return e!==r.default&&(t.createNodeIterator=e),e};var r=i(t("./builtin")),o=i(t("./polyfill"));function i(t){return t&&t.__esModule?t:{default:t}}},{"./builtin":17,"./polyfill":20}],22:[function(t,e,n){e.exports=t("./lib/polyfill").default},{"./lib/polyfill":20}],23:[function(t,e,n){e.exports=t("./lib/shim").default},{"./lib/shim":21}],24:[function(t,e,n){e.exports=t("./lib").default},{"./lib":25}],25:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){if(4!==t.whatToShow)throw new Error("Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.");var n=0,r=t.referenceNode,o=null;if(function(t){return!isNaN(parseInt(t))&&isFinite(t)}(e))o={forward:function(){return n<e},backward:function(){return n>e}};else{if(!function(t){return 3===t.nodeType}(e))throw new Error("Argument 2 of seek must be a number or a Text Node.");o={forward:a(r,e)?function(){return!1}:function(){return r!==e},backward:function(){return r!=e||!t.pointerBeforeReferenceNode}}}for(;o.forward()&&null!==(r=t.nextNode());)n+=r.nodeValue.length;for(;o.backward()&&null!==(r=t.previousNode());)n-=r.nodeValue.length;return n};var r=i(t("ancestors")),o=i(t("index-of"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(t===e)return!1;for(var n=null,i=[t].concat((0,r.default)(t)).reverse(),a=[e].concat((0,r.default)(e)).reverse();i[0]===a[0];)n=i.shift(),a.shift();return i=i[0],a=a[0],(0,o.default)(n.childNodes,i)>(0,o.default)(n.childNodes,a)}},{ancestors:1,"index-of":33}],26:[function(t,e,n){"use strict";e.exports=t("./lib/implementation").default},{"./lib/implementation":27}],27:[function(t,e,n){"use strict";var r,o;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this;if("function"==typeof c){var o=c(r,t,e,n,!1),i=u(o),a=s(i,"referenceNode");return void 0===a?p(o):o}return d(t,e,n)};n.default=i;var a=Object.create.bind(Object),s=Object.getOwnPropertyDescriptor.bind(Object),u=Object.getPrototypeOf.bind(Object),l=null===(r=Document)||void 0===r||null===(o=r.prototype)||void 0===o?void 0:o.createNodeIterator,c=l&&Function.prototype.call.bind(l);function f(t,e){if(t.firstChild)return t.firstChild;for(;t!==e;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}function h(t,e){if(t===e)return null;if(t.previousSibling){for(t=t.previousSibling;t.lastChild;)t=t.lastChild;return t}return t.parentNode}function d(t,e,n){var r={referenceNode:t,pointerBeforeReferenceNode:!0};function o(t){return!n||1===n(t)}function i(t){return e>>t.nodeType-1&!0}return a({},{root:{value:t},referenceNode:{get:function(){return r.referenceNode}},pointerBeforeReferenceNode:{get:function(){return r.pointerBeforeReferenceNode}},whatToShow:{value:e},filter:{value:n},nextNode:{value:function(){for(var e=r.referenceNode,n=r.pointerBeforeReferenceNode;;){if(n?n=!1:e=f(e,t),null===e)return null;if(i(e)&&o(e))break}return r.referenceNode=e,r.pointerBeforeReferenceNode=n,e}},previousNode:{value:function(){for(var t=r.pointerBeforeReferenceNode,e=r.referenceNode;;){if(t?e=h(e,r.root):t=!0,null===e)return null;if(i(e)&&o(e))break}return r.referenceNode=e,r.pointerBeforeReferenceNode=t,e}},detach:{value:function(){}},toString:{value:function(){return"[object NodeIterator]"}}})}function p(t){var e={referenceNode:t.root,pointerBeforeReferenceNode:!0},n=u(t),r=a(n,{root:{get:function(){return t.root}},referenceNode:{get:function(){return e.referenceNode}},pointerBeforeReferenceNode:{get:function(){return e.pointerBeforeReferenceNode}},whatToShow:{get:function(){return t.whatToShow}},filter:{get:function(){return t.filter}},nextNode:{value:function(){var n=t.nextNode();return null===n?null:(e.referenceNode=n,e.pointerBeforeReferenceNode=!1,e.referenceNode)}},previousNode:{value:function(){var n=t.previousNode();return null===n?null:(e.referenceNode=n,e.pointerBeforeReferenceNode=!0,e.referenceNode)}},detach:{value:function(){}},toString:{value:function(){return"[object NodeIterator]"}}});return a(r)}},{}],28:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){return r}},{"./implementation":26}],29:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./lib":30,dup:24}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){if(4!==t.whatToShow){var n;try{n=new DOMException(o,"InvalidStateError")}catch(t){(n=new Error(o)).code=11,n.name="InvalidStateError",n.toString=function(){return"InvalidStateError: ".concat(o)}}throw n}var s=0,u=t.referenceNode,l=null;if(function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}(e))l={forward:function(){return s<e},backward:function(){return s>e||!t.pointerBeforeReferenceNode}};else{if(!i(e))throw new TypeError("Argument 2 of seek must be an integer or a Text Node.");l={forward:a(u,e)?function(){return!1}:function(){return u!==e},backward:function(){return u!==e||!t.pointerBeforeReferenceNode}}}for(;l.forward();){if(null===(u=t.nextNode()))throw new RangeError(r);s+=u.nodeValue.length}for(t.nextNode()&&(u=t.previousNode());l.backward();){if(null===(u=t.previousNode()))throw new RangeError(r);s-=u.nodeValue.length}if(!i(t.referenceNode))throw new RangeError(r);return s};var r="Iterator exhausted before seek ended.",o="Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.";function i(t){return 3===t.nodeType}function a(t,e){return 2&t.compareDocumentPosition(e)}},{}],31:[function(t,e,n){(function(t){var r;r=function(){"use strict";function t(t){var e=!0,n=!1,r=null,o={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function i(t){return!!(t&&t!==document&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"classList"in t&&"contains"in t.classList)}function a(t){t.classList.contains("focus-visible")||(t.classList.add("focus-visible"),t.setAttribute("data-focus-visible-added",""))}function s(t){e=!1}function u(){document.addEventListener("mousemove",l),document.addEventListener("mousedown",l),document.addEventListener("mouseup",l),document.addEventListener("pointermove",l),document.addEventListener("pointerdown",l),document.addEventListener("pointerup",l),document.addEventListener("touchmove",l),document.addEventListener("touchstart",l),document.addEventListener("touchend",l)}function l(t){t.target.nodeName&&"html"===t.target.nodeName.toLowerCase()||(e=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mousedown",l),document.removeEventListener("mouseup",l),document.removeEventListener("pointermove",l),document.removeEventListener("pointerdown",l),document.removeEventListener("pointerup",l),document.removeEventListener("touchmove",l),document.removeEventListener("touchstart",l),document.removeEventListener("touchend",l))}document.addEventListener("keydown",(function(n){n.metaKey||n.altKey||n.ctrlKey||(i(t.activeElement)&&a(t.activeElement),e=!0)}),!0),document.addEventListener("mousedown",s,!0),document.addEventListener("pointerdown",s,!0),document.addEventListener("touchstart",s,!0),document.addEventListener("visibilitychange",(function(t){"hidden"===document.visibilityState&&(n&&(e=!0),u())}),!0),u(),t.addEventListener("focus",(function(t){var n,r,s;i(t.target)&&(e||(r=(n=t.target).type,"INPUT"===(s=n.tagName)&&o[r]&&!n.readOnly||"TEXTAREA"===s&&!n.readOnly||n.isContentEditable))&&a(t.target)}),!0),t.addEventListener("blur",(function(t){var e;i(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(r),r=window.setTimeout((function(){n=!1}),100),(e=t.target).hasAttribute("data-focus-visible-added")&&(e.classList.remove("focus-visible"),e.removeAttribute("data-focus-visible-added")))}),!0),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host?t.host.setAttribute("data-js-focus-visible",""):t.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var e;window.applyFocusVisiblePolyfill=t;try{e=new CustomEvent("focus-visible-polyfill-ready")}catch(t){(e=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(e)}"undefined"!=typeof document&&t(document)},"object"==typeof n&&void 0!==e?r():"function"==typeof t&&t.amd?t(r):r()}).call(this,void 0)},{}],32:[function(t,e,n){(function(t){
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(n,r,o,i){"use strict";var a,s=["","webkit","Moz","MS","ms","o"],u=r.createElement("div"),l=Math.round,c=Math.abs,f=Date.now;function h(t,e,n){return setTimeout(b(t,n),e)}function d(t,e,n){return!!Array.isArray(t)&&(p(t,n[e],n),!0)}function p(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function g(t,e,r){var o="DEPRECATED METHOD: "+e+"\n"+r+" AT \n";return function(){var e=new Error("get-stack-trace"),r=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=n.console&&(n.console.warn||n.console.log);return i&&i.call(n.console,o,r),t.apply(this,arguments)}}a="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}:Object.assign;var v=g((function(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;)(!n||n&&t[r[o]]===i)&&(t[r[o]]=e[r[o]]),o++;return t}),"extend","Use `assign`."),y=g((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function m(t,e,n){var r,o=e.prototype;(r=t.prototype=Object.create(o)).constructor=t,r._super=o,n&&a(r,n)}function b(t,e){return function(){return t.apply(e,arguments)}}function _(t,e){return"function"==typeof t?t.apply(e&&e[0]||i,e):t}function w(t,e){return t===i?e:t}function O(t,e,n){p(T(e),(function(e){t.addEventListener(e,n,!1)}))}function S(t,e,n){p(T(e),(function(e){t.removeEventListener(e,n,!1)}))}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function x(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function A(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function C(t,e,n){for(var r=[],o=[],i=0;i<t.length;){var a=e?t[i][e]:t[i];A(o,a)<0&&r.push(t[i]),o[i]=a,i++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function j(t,e){for(var n,r,o=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((r=(n=s[a])?n+o:e)in t)return r;a++}return i}var k=1;function N(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||n}var R="ontouchstart"in n,M=j(n,"PointerEvent")!==i,D=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),I="touch",L="mouse",B=["x","y"],F=["clientX","clientY"];function q(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){_(t.options.enable,[t])&&n.handler(e)},this.init()}function H(t,e,n){var r=n.pointers.length,o=n.changedPointers.length,a=1&e&&r-o==0,s=12&e&&r-o==0;n.isFirst=!!a,n.isFinal=!!s,a&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,o=r.length;n.firstInput||(n.firstInput=U(e)),o>1&&!n.firstMultiple?n.firstMultiple=U(e):1===o&&(n.firstMultiple=!1);var a=n.firstInput,s=n.firstMultiple,u=s?s.center:a.center,l=e.center=V(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=$(u,l),e.distance=X(u,l),function(t,e){var n=e.center,r=t.offsetDelta||{},o=t.prevDelta||{},i=t.prevInput||{};1!==e.eventType&&4!==i.eventType||(o=t.prevDelta={x:i.deltaX||0,y:i.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-r.x),e.deltaY=o.y+(n.y-r.y)}(n,e),e.offsetDirection=W(e.deltaX,e.deltaY);var h,d,p=z(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=c(p.x)>c(p.y)?p.x:p.y,e.scale=s?(h=s.pointers,X((d=r)[0],d[1],F)/X(h[0],h[1],F)):1,e.rotation=s?function(t,e){return $(e[1],e[0],F)+$(t[1],t[0],F)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,o,a,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(u>25||s.velocity===i)){var l=e.deltaX-s.deltaX,f=e.deltaY-s.deltaY,h=z(u,l,f);r=h.x,o=h.y,n=c(h.x)>c(h.y)?h.x:h.y,a=W(l,f),t.lastInterval=e}else n=s.velocity,r=s.velocityX,o=s.velocityY,a=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=o,e.direction=a}(n,e);var g=t.element;E(e.srcEvent.target,g)&&(g=e.srcEvent.target),e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function U(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:l(t.pointers[n].clientX),clientY:l(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:V(e),deltaX:t.deltaX,deltaY:t.deltaY}}function V(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var n=0,r=0,o=0;o<e;)n+=t[o].clientX,r+=t[o].clientY,o++;return{x:l(n/e),y:l(r/e)}}function z(t,e,n){return{x:e/t||0,y:n/t||0}}function W(t,e){return t===e?1:c(t)>=c(e)?t<0?2:4:e<0?8:16}function X(t,e,n){n||(n=B);var r=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(r*r+o*o)}function $(t,e,n){n||(n=B);var r=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,r)/Math.PI}q.prototype={handler:function(){},init:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(N(this.element),this.evWin,this.domHandler)}};var Y={mousedown:1,mousemove:2,mouseup:4},G="mousedown",Q="mousemove mouseup";function K(){this.evEl=G,this.evWin=Q,this.pressed=!1,q.apply(this,arguments)}m(K,q,{handler:function(t){var e=Y[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:L,srcEvent:t}))}});var Z={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},J={2:I,3:"pen",4:L,5:"kinect"},tt="pointerdown",et="pointermove pointerup pointercancel";function nt(){this.evEl=tt,this.evWin=et,q.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n.MSPointerEvent&&!n.PointerEvent&&(tt="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel"),m(nt,q,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),o=Z[r],i=J[t.pointerType]||t.pointerType,a=i==I,s=A(e,t.pointerId,"pointerId");1&o&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&o&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:i,srcEvent:t}),n&&e.splice(s,1))}});var rt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ot="touchstart",it="touchstart touchmove touchend touchcancel";function at(){this.evTarget=ot,this.evWin=it,this.started=!1,q.apply(this,arguments)}function st(t,e){var n=P(t.touches),r=P(t.changedTouches);return 12&e&&(n=C(n.concat(r),"identifier",!0)),[n,r]}m(at,q,{handler:function(t){var e=rt[t.type];if(1===e&&(this.started=!0),this.started){var n=st.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:I,srcEvent:t})}}});var ut={touchstart:1,touchmove:2,touchend:4,touchcancel:8},lt="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=lt,this.targetIds={},q.apply(this,arguments)}function ft(t,e){var n=P(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,i,a=P(t.changedTouches),s=[],u=this.target;if(i=n.filter((function(t){return E(t.target,u)})),1===e)for(o=0;o<i.length;)r[i[o].identifier]=!0,o++;for(o=0;o<a.length;)r[a[o].identifier]&&s.push(a[o]),12&e&&delete r[a[o].identifier],o++;return s.length?[C(i.concat(s),"identifier",!0),s]:void 0}function ht(){q.apply(this,arguments);var t=b(this.handler,this);this.touch=new ct(this.manager,t),this.mouse=new K(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function dt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,pt.call(this,e)):12&t&&pt.call(this,e)}function pt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function gt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],i=Math.abs(e-o.x),a=Math.abs(n-o.y);if(i<=25&&a<=25)return!0}return!1}m(ct,q,{handler:function(t){var e=ut[t.type],n=ft.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:I,srcEvent:t})}}),m(ht,q,{handler:function(t,e,n){var r=n.pointerType==I,o=n.pointerType==L;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)dt.call(this,e,n);else if(o&&gt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=j(u.style,"touchAction"),yt=vt!==i,mt="compute",bt="auto",_t="manipulation",wt="none",Ot="pan-x",St="pan-y",Et=function(){if(!yt)return!1;var t={},e=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!e||n.CSS.supports("touch-action",r)})),t}();function xt(t,e){this.manager=t,this.set(e)}xt.prototype={set:function(t){t==mt&&(t=this.compute()),yt&&this.manager.element.style&&Et[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,(function(e){_(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(x(t,wt))return wt;var e=x(t,Ot),n=x(t,St);return e&&n?wt:e||n?e?Ot:St:x(t,_t)?_t:bt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,o=x(r,wt)&&!Et.none,i=x(r,St)&&!Et["pan-y"],a=x(r,Ot)&&!Et["pan-x"];if(o){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}if(!a||!i)return o||i&&6&n||a&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Tt=32;function At(t){this.options=a({},this.defaults,t||{}),this.id=k++,this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Pt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Ct(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function jt(t,e){var n=e.manager;return n?n.get(t):t}function kt(){At.apply(this,arguments)}function Nt(){kt.apply(this,arguments),this.pX=null,this.pY=null}function Rt(){kt.apply(this,arguments)}function Mt(){At.apply(this,arguments),this._timer=null,this._input=null}function Dt(){kt.apply(this,arguments)}function It(){kt.apply(this,arguments)}function Lt(){At.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Bt(t,e){return(e=e||{}).recognizers=w(e.recognizers,Bt.defaults.preset),new Ft(t,e)}function Ft(t,e){this.options=a({},Bt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(M?nt:D?ct:R?ht:K))(this,H),this.touchAction=new xt(this,this.options.touchAction),qt(this,!0),p(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function qt(t,e){var n,r=t.element;r.style&&(p(t.options.cssProps,(function(o,i){n=j(r.style,i),e?(t.oldCssProps[n]=r.style[n],r.style[n]=o):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}At.prototype={defaults:{},set:function(t){return a(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(d(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=jt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return d(t,"dropRecognizeWith",this)||(t=jt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(d(t,"requireFailure",this))return this;var e=this.requireFail;return-1===A(e,t=jt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(d(t,"dropRequireFailure",this))return this;t=jt(t,this);var e=A(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Pt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Pt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Tt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=a({},t);if(!_(this.options.enable,[this,e]))return this.reset(),void(this.state=Tt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},m(kt,At,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,o=this.attrTest(t);return r&&(8&n||!o)?16|e:r||o?4&n?8|e:2&e?4|e:2:Tt}}),m(Nt,kt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(St),24&t&&e.push(Ot),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,o=t.direction,i=t.deltaX,a=t.deltaY;return o&e.direction||(6&e.direction?(o=0===i?1:i<0?2:4,n=i!=this.pX,r=Math.abs(t.deltaX)):(o=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=o,n&&r>e.threshold&&o&e.direction},attrTest:function(t){return kt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ct(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),m(Rt,kt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[wt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),m(Mt,At,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[bt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=h((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Tt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),m(Dt,kt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[wt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),m(It,kt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Nt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Ct(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),m(Lt,At,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[_t]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!=t.eventType)return this.failTimeout();var i=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||X(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&i?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=h((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Tt},failTimeout:function(){return this._timer=h((function(){this.state=Tt}),this.options.interval,this),Tt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Bt.VERSION="2.0.7",Bt.defaults={domEvents:!1,touchAction:mt,enable:!0,inputTarget:null,inputClass:null,preset:[[Dt,{enable:!1}],[Rt,{enable:!1},["rotate"]],[It,{direction:6}],[Nt,{direction:6},["swipe"]],[Lt],[Lt,{event:"doubletap",taps:2},["tap"]],[Mt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ft.prototype={set:function(t){return a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,o=e.curRecognizer;(!o||o&&8&o.state)&&(o=e.curRecognizer=null);for(var i=0;i<r.length;)n=r[i],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&14&n.state&&(o=e.curRecognizer=n),i++}},get:function(t){if(t instanceof At)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(d(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(d(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=A(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return p(T(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==i){var n=this.handlers;return p(T(t),(function(t){e?n[t]&&n[t].splice(A(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=r.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](e),o++}},destroy:function(){this.element&&qt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(Bt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Tt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ft,Input:q,TouchAction:xt,TouchInput:ct,MouseInput:K,PointerEventInput:nt,TouchMouseInput:ht,SingleTouchInput:at,Recognizer:At,AttrRecognizer:kt,Tap:Lt,Pan:Nt,Swipe:It,Pinch:Rt,Rotate:Dt,Press:Mt,on:O,off:S,each:p,merge:y,extend:v,assign:a,inherit:m,bindFn:b,prefixed:j}),(void 0!==n?n:"undefined"!=typeof self?self:{}).Hammer=Bt,"function"==typeof t&&t.amd?t((function(){return Bt})):void 0!==e&&e.exports?e.exports=Bt:n.Hammer=Bt}(window,document)}).call(this,void 0)},{}],33:[function(t,e,n){
/*!
 * index-of <https://github.com/jonschlinkert/index-of>
 *
 * Copyright (c) 2014-2015 Jon Schlinkert.
 * Licensed under the MIT license.
 */
"use strict";e.exports=function(t,e,n){if(n=n||0,null==t)return-1;var r=t.length,o=n<0?r+n:n;if(o>=t.length)return-1;for(;o<r;){if(t[o]===e)return o;o++}return-1}},{}],34:[function(t,e,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,l=s||u||Function("return this")(),c=Object.prototype.toString,f=Math.max,h=Math.min,d=function(){return l.Date.now()};function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==c.call(t)}(t))return NaN;if(p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var s=o.test(t);return s||i.test(t)?a(t.slice(2),s?2:8):r.test(t)?NaN:+t}e.exports=function(t,e,n){var r,o,i,a,s,u,l=0,c=!1,v=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=r,i=o;return r=o=void 0,l=e,a=t.apply(i,n)}function b(t){return l=t,s=setTimeout(w,e),c?m(t):a}function _(t){var n=t-u;return void 0===u||n>=e||n<0||v&&t-l>=i}function w(){var t=d();if(_(t))return O(t);s=setTimeout(w,function(t){var n=e-(t-u);return v?h(n,i-(t-l)):n}(t))}function O(t){return s=void 0,y&&r?m(t):(r=o=void 0,a)}function S(){var t=d(),n=_(t);if(r=arguments,o=this,u=t,n){if(void 0===s)return b(u);if(v)return s=setTimeout(w,e),m(u)}return void 0===s&&(s=setTimeout(w,e)),a}return e=g(e)||0,p(n)&&(c=!!n.leading,i=(v="maxWait"in n)?f(g(n.maxWait)||0,e):i,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=o=s=void 0},S.flush=function(){return void 0===s?a:O(d())},S}}).call(this,window)},{}],35:[function(t,e,n){var r,o,i,a,s,u,l,c={},f=[],h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function d(t,e){for(var n in e)t[n]=e[n];return t}function p(t){var e=t.parentNode;e&&e.removeChild(t)}function g(t,e,n){var r,o,i,a=arguments,s={};for(i in e)"key"==i?r=e[i]:"ref"==i?o=e[i]:s[i]=e[i];if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(a[i]);if(null!=n&&(s.children=n),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===s[i]&&(s[i]=t.defaultProps[i]);return v(t,s,r,o,null)}function v(t,e,n,o,i){var a={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i};return null==i&&(a.__v=a),null!=r.vnode&&r.vnode(a),a}function y(t){return t.children}function m(t,e){this.props=t,this.context=e}function b(t,e){if(null==e)return t.__?b(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?b(t):null}function _(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return _(t)}}function w(t){(!t.__d&&(t.__d=!0)&&i.push(t)&&!O.__r++||s!==r.debounceRendering)&&((s=r.debounceRendering)||a)(O)}function O(){for(var t;O.__r=i.length;)t=i.sort((function(t,e){return t.__v.__b-e.__v.__b})),i=[],t.some((function(t){var e,n,r,o,i,a,s;t.__d&&(a=(i=(e=t).__v).__e,(s=e.__P)&&(n=[],(r=d({},i)).__v=r,o=j(s,i,r,e.__n,void 0!==s.ownerSVGElement,null!=i.__h?[a]:null,n,null==a?b(i):a,i.__h),k(n,i),o!=a&&_(i)))}))}function S(t,e,n,r,o,i,a,s,u,l){var h,d,g,m,_,w,O,S=r&&r.__k||f,x=S.length;for(u==c&&(u=null!=a?a[0]:x?b(r,0):null),n.__k=[],h=0;h<e.length;h++)if(null!=(m=n.__k[h]=null==(m=e[h])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m?v(null,m,null,null,m):Array.isArray(m)?v(y,{children:m},null,null,null):null!=m.__e||null!=m.__c?v(m.type,m.props,m.key,null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(g=S[h])||g&&m.key==g.key&&m.type===g.type)S[h]=void 0;else for(d=0;d<x;d++){if((g=S[d])&&m.key==g.key&&m.type===g.type){S[d]=void 0;break}g=null}_=j(t,m,g=g||c,o,i,a,s,u,l),(d=m.ref)&&g.ref!=d&&(O||(O=[]),g.ref&&O.push(g.ref,null,m),O.push(d,m.__c||_,m)),null!=_?(null==w&&(w=_),u=E(t,m,g,S,a,_,u),l||"option"!=n.type?"function"==typeof n.type&&(n.__d=u):t.value=""):u&&g.__e==u&&u.parentNode!=t&&(u=b(g))}if(n.__e=w,null!=a&&"function"!=typeof n.type)for(h=a.length;h--;)null!=a[h]&&p(a[h]);for(h=x;h--;)null!=S[h]&&M(S[h],S[h]);if(O)for(h=0;h<O.length;h++)R(O[h],O[++h],O[++h])}function E(t,e,n,r,o,i,a){var s,u,l;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(o==n||i!=a||null==i.parentNode)t:if(null==a||a.parentNode!==t)t.appendChild(i),s=null;else{for(u=a,l=0;(u=u.nextSibling)&&l<r.length;l+=2)if(u==i)break t;t.insertBefore(i,a),s=a}return void 0!==s?s:i.nextSibling}function x(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||h.test(e)?n:n+"px"}function T(t,e,n,r,o){var i,a,s;if(o&&"className"==e&&(e="class"),"style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||x(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||x(t.style,e,n[e])}else"o"===e[0]&&"n"===e[1]?(i=e!==(e=e.replace(/Capture$/,"")),(a=e.toLowerCase())in t&&(e=a),e=e.slice(2),t.l||(t.l={}),t.l[e+i]=n,s=i?P:A,n?r||t.addEventListener(e,s,i):t.removeEventListener(e,s,i)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&"download"!==e&&"href"!==e&&!o&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function A(t){this.l[t.type+!1](r.event?r.event(t):t)}function P(t){this.l[t.type+!0](r.event?r.event(t):t)}function C(t,e,n){var r,o;for(r=0;r<t.__k.length;r++)(o=t.__k[r])&&(o.__=t,o.__e&&("function"==typeof o.type&&o.__k.length>1&&C(o,e,n),e=E(n,o,o,t.__k,null,o.__e,e),"function"==typeof t.type&&(t.__d=e)))}function j(t,e,n,o,i,a,s,u,l){var c,f,h,p,g,v,b,_,w,O,E,x=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(l=n.__h,u=e.__e=n.__e,e.__h=null,a=[u]),(c=r.__b)&&c(e);try{t:if("function"==typeof x){if(_=e.props,w=(c=x.contextType)&&o[c.__c],O=c?w?w.props.value:c.__:o,n.__c?b=(f=e.__c=n.__c).__=f.__E:("prototype"in x&&x.prototype.render?e.__c=f=new x(_,O):(e.__c=f=new m(_,O),f.constructor=x,f.render=D),w&&w.sub(f),f.props=_,f.state||(f.state={}),f.context=O,f.__n=o,h=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=x.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=d({},f.__s)),d(f.__s,x.getDerivedStateFromProps(_,f.__s))),p=f.props,g=f.state,h)null==x.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==x.getDerivedStateFromProps&&_!==p&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(_,O),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(_,f.__s,O)||e.__v===n.__v){f.props=_,f.state=f.__s,e.__v!==n.__v&&(f.__d=!1),f.__v=e,e.__e=n.__e,e.__k=n.__k,f.__h.length&&s.push(f),C(e,u,t);break t}null!=f.componentWillUpdate&&f.componentWillUpdate(_,f.__s,O),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(p,g,v)}))}f.context=O,f.props=_,f.state=f.__s,(c=r.__r)&&c(e),f.__d=!1,f.__v=e,f.__P=t,c=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(o=d(d({},o),f.getChildContext())),h||null==f.getSnapshotBeforeUpdate||(v=f.getSnapshotBeforeUpdate(p,g)),E=null!=c&&c.type==y&&null==c.key?c.props.children:c,S(t,Array.isArray(E)?E:[E],e,n,o,i,a,s,u,l),f.base=e.__e,e.__h=null,f.__h.length&&s.push(f),b&&(f.__E=f.__=null),f.__e=!1}else null==a&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=N(n.__e,e,n,o,i,a,s,l);(c=r.diffed)&&c(e)}catch(t){e.__v=null,(l||null!=a)&&(e.__e=u,e.__h=!!l,a[a.indexOf(u)]=null),r.__e(t,e,n)}return e.__e}function k(t,e){r.__c&&r.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){r.__e(t,e.__v)}}))}function N(t,e,n,r,o,i,a,s){var u,l,h,d,p,g=n.props,v=e.props;if(o="svg"===e.type||o,null!=i)for(u=0;u<i.length;u++)if(null!=(l=i[u])&&((null===e.type?3===l.nodeType:l.localName===e.type)||t==l)){t=l,i[u]=null;break}if(null==t){if(null===e.type)return document.createTextNode(v);t=o?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,v.is&&{is:v.is}),i=null,s=!1}if(null===e.type)g===v||s&&t.data===v||(t.data=v);else{if(null!=i&&(i=f.slice.call(t.childNodes)),h=(g=n.props||c).dangerouslySetInnerHTML,d=v.dangerouslySetInnerHTML,!s){if(null!=i)for(g={},p=0;p<t.attributes.length;p++)g[t.attributes[p].name]=t.attributes[p].value;(d||h)&&(d&&(h&&d.__html==h.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}(function(t,e,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in e||T(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===e[i]||T(t,i,e[i],n[i],r)})(t,v,g,o,s),d?e.__k=[]:(u=e.props.children,S(t,Array.isArray(u)?u:[u],e,n,r,"foreignObject"!==e.type&&o,i,a,c,s)),s||("value"in v&&void 0!==(u=v.value)&&(u!==t.value||"progress"===e.type&&!u)&&T(t,"value",u,g.value,!1),"checked"in v&&void 0!==(u=v.checked)&&u!==t.checked&&T(t,"checked",u,g.checked,!1))}return t}function R(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){r.__e(t,n)}}function M(t,e,n){var o,i,a;if(r.unmount&&r.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||R(o,null,e)),n||"function"==typeof t.type||(n=null!=(i=t.__e)),t.__e=t.__d=void 0,null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){r.__e(t,e)}o.base=o.__P=null}if(o=t.__k)for(a=0;a<o.length;a++)o[a]&&M(o[a],e,n);null!=i&&p(i)}function D(t,e,n){return this.constructor(t,n)}function I(t,e,n){var o,i,a;r.__&&r.__(t,e),i=(o=n===u)?null:n&&n.__k||e.__k,t=g(y,null,[t]),a=[],j(e,(o?e:n||e).__k=t,i||c,c,void 0!==e.ownerSVGElement,n&&!o?[n]:i?null:e.childNodes.length?f.slice.call(e.childNodes):null,a,n||c,o),k(a,t)}r={__e:function(t,e){for(var n,r,o,i=e.__h;e=e.__;)if((n=e.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(t)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(t),o=n.__d),o)return e.__h=i,n.__E=n}catch(e){t=e}throw t}},o=function(t){return null!=t&&void 0===t.constructor},m.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=d({},this.state),"function"==typeof t&&(t=t(d({},n),this.props)),t&&d(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),w(this))},m.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),w(this))},m.prototype.render=y,i=[],a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,O.__r=0,u=c,l=0,n.render=I,n.hydrate=function(t,e){I(t,e,u)},n.createElement=g,n.h=g,n.Fragment=y,n.createRef=function(){return{current:null}},n.isValidElement=o,n.Component=m,n.cloneElement=function(t,e,n){var r,o,i,a=arguments,s=d({},t.props);for(i in e)"key"==i?r=e[i]:"ref"==i?o=e[i]:s[i]=e[i];if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(a[i]);return null!=n&&(s.children=n),v(t.type,s,r||t.key,o||t.ref,null)},n.createContext=function(t,e){var n={__c:e="__cC"+l++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t,n,r){return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(w)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n},n.toChildArray=function t(e,n){return n=n||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){t(e,n)})):n.push(e)),n},n.__u=M,n.options=r},{}],36:[function(t,e,n){var r,o,i,a=t("preact"),s=0,u=[],l=a.options.__r,c=a.options.diffed,f=a.options.__c,h=a.options.unmount;function d(t,e){a.options.__h&&a.options.__h(o,t,s||e),s=0;var n=o.__H||(o.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function p(t){return s=1,g(S,t)}function g(t,e,n){var i=d(r++,2);return i.t=t,i.__c||(i.__=[n?n(e):S(void 0,e),function(t){var e=i.t(i.__[0],t);i.__[0]!==e&&(i.__=[e,i.__[1]],i.__c.setState({}))}],i.__c=o),i.__}function v(t,e){var n=d(r++,4);!a.options.__s&&O(n.__H,e)&&(n.__=t,n.__H=e,o.__h.push(n))}function y(t,e){var n=d(r++,7);return O(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function m(){u.some((function(t){if(t.__P)try{t.__H.__h.forEach(_),t.__H.__h.forEach(w),t.__H.__h=[]}catch(e){return t.__H.__h=[],a.options.__e(e,t.__v),!0}})),u=[]}a.options.__r=function(t){l&&l(t),r=0;var e=(o=t.__c).__H;e&&(e.__h.forEach(_),e.__h.forEach(w),e.__h=[])},a.options.diffed=function(t){c&&c(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==u.push(e)&&i===a.options.requestAnimationFrame||((i=a.options.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),b&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);b&&(e=requestAnimationFrame(n))})(m))},a.options.__c=function(t,e){e.some((function(t){try{t.__h.forEach(_),t.__h=t.__h.filter((function(t){return!t.__||w(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],a.options.__e(n,t.__v)}})),f&&f(t,e)},a.options.unmount=function(t){h&&h(t);var e=t.__c;if(e&&e.__H)try{e.__H.__.forEach(_)}catch(t){a.options.__e(t,e.__v)}};var b="function"==typeof requestAnimationFrame;function _(t){"function"==typeof t.u&&t.u()}function w(t){t.u=t.__()}function O(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function S(t,e){return"function"==typeof e?e(t):e}n.useState=p,n.useReducer=g,n.useEffect=function(t,e){var n=d(r++,3);!a.options.__s&&O(n.__H,e)&&(n.__=t,n.__H=e,o.__H.__h.push(n))},n.useLayoutEffect=v,n.useRef=function(t){return s=5,y((function(){return{current:t}}),[])},n.useImperativeHandle=function(t,e,n){s=6,v((function(){"function"==typeof t?t(e()):t&&(t.current=e())}),null==n?n:n.concat(t))},n.useMemo=y,n.useCallback=function(t,e){return s=8,y((function(){return t}),e)},n.useContext=function(t){var e=o.context[t.__c],n=d(r++,9);return n.__c=t,e?(null==n.__&&(n.__=!0,e.sub(o)),e.props.value):t.__},n.useDebugValue=function(t,e){a.options.useDebugValue&&a.options.useDebugValue(e?e(t):t)},n.useErrorBoundary=function(t){var e=d(r++,10),n=p();return e.__=t,o.componentDidCatch||(o.componentDidCatch=function(t){e.__&&e.__(t),n[1](t)}),[n[0],function(){n[1](void 0)}]}},{preact:35}],37:[function(t,e,n){"use strict";var r=t("./lib/ReactPropTypesSecret");function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function t(t,e,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},{"./lib/ReactPropTypesSecret":39}],38:[function(t,e,n){e.exports=t("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":37}],39:[function(t,e,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],40:[function(t,e,n){var r="complete",o="canceled";function i(t,e,n){t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function a(t){var e=t._scrollSettings;if(e){var n=e.maxSynchronousAlignments,o=function(t,e){var n,r,o,i,a,s,u,l=t.align,c=t.target.getBoundingClientRect(),f=l&&null!=l.left?l.left:.5,h=l&&null!=l.top?l.top:.5,d=l&&null!=l.leftOffset?l.leftOffset:0,p=l&&null!=l.topOffset?l.topOffset:0,g=f,v=h;if(t.isWindow(e))s=Math.min(c.width,e.innerWidth),u=Math.min(c.height,e.innerHeight),r=c.left+e.pageXOffset-e.innerWidth*g+s*g,o=c.top+e.pageYOffset-e.innerHeight*v+u*v,o-=p,i=(r-=d)-e.pageXOffset,a=o-e.pageYOffset;else{s=c.width,u=c.height,n=e.getBoundingClientRect();var y=c.left-(n.left-e.scrollLeft),m=c.top-(n.top-e.scrollTop);r=y+s*g-e.clientWidth*g,o=m+u*v-e.clientHeight*v,r-=d,o-=p,r=Math.max(Math.min(r,e.scrollWidth-e.clientWidth),0),o=Math.max(Math.min(o,e.scrollHeight-e.clientHeight),0),i=r-e.scrollLeft,a=o-e.scrollTop}return{x:r,y:o,differenceX:i,differenceY:a}}(e,t),s=Date.now()-e.startTime,u=Math.min(1/e.time*s,1);if(e.endIterations>=n)return i(t,o.x,o.y),t._scrollSettings=null,e.end(r);var l=1-e.ease(u);if(i(t,o.x-o.differenceX*l,o.y-o.differenceY*l),s>=e.time)return e.endIterations++,a(t);!function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(a.bind(null,t))}}function s(t){return t.self===t}function u(t,e,n,r){var i,u=!e._scrollSettings,l=e._scrollSettings,c=Date.now(),f={passive:!0};function h(t){e._scrollSettings=null,e.parentElement&&e.parentElement._scrollSettings&&e.parentElement._scrollSettings.end(t),n.debug&&console.log("Scrolling ended with type",t,"for",e),r(t),i&&(e.removeEventListener("touchstart",i,f),e.removeEventListener("wheel",i,f))}l&&l.end(o);var d=n.maxSynchronousAlignments;return null==d&&(d=3),e._scrollSettings={startTime:c,endIterations:0,target:t,time:n.time,ease:n.ease,align:n.align,isWindow:n.isWindow||s,maxSynchronousAlignments:d,end:h},"cancellable"in n&&!n.cancellable||(i=h.bind(null,o),e.addEventListener("touchstart",i,f),e.addEventListener("wheel",i,f)),u&&a(e),i}function l(t){return"pageXOffset"in t||(t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth)&&"hidden"!==getComputedStyle(t).overflow}function c(){return!0}function f(t){if(t.assignedSlot)return f(t.assignedSlot);if(t.parentElement)return"BODY"===t.parentElement.tagName?t.parentElement.ownerDocument.defaultView||t.parentElement.ownerDocument.ownerWindow:t.parentElement;if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e.host}}e.exports=function(t,e,n){if(t){"function"==typeof e&&(n=e,e=null),e||(e={}),e.time=isNaN(e.time)?1e3:e.time,e.ease=e.ease||function(t){return 1-Math.pow(1-t,t/2)};var o,i=f(t),a=1,s=e.validTarget||c,h=e.isScrollable;for(e.debug&&(console.log("About to scroll to",t),i||console.error("Target did not have a parent, is it mounted in the DOM?"));i;)if(e.debug&&console.log("Scrolling parent node",i),s(i,a)&&(h?h(i,l):l(i))&&(a++,o=u(t,i,e,d)),!(i=f(i))){d(r);break}return o}function d(t){--a||n&&n(t)}}},{}],41:[function(t,e,n){function r(){}r.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,a=r.length;i<a;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},e.exports=r,e.exports.TinyEmitter=r},{}],42:[function(t,e,n){e.exports=t("./zen-observable.js").Observable},{"./zen-observable.js":43}],43:[function(t,e,n){"use strict";var r;r=function(t,e){function n(t){return"function"==typeof Symbol&&Boolean(Symbol[t])}function r(t){return n(t)?Symbol[t]:"@@"+t}function o(t,e){var n=t[e];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function i(t){var e=r("species");return e?t[e]:t}function a(t,e){Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);r.enumerable=!1,Object.defineProperty(t,n,r)}))}function s(t){var e=t._cleanup;e&&(t._cleanup=void 0,e())}function u(t){return void 0===t._observer}function l(t){u(t)||(t._observer=void 0,s(t))}function c(t,e){if(Object(t)!==t)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=t;var n=o(t,"start");if(n&&n.call(t,this),!u(this)){t=new f(this);try{var r=e.call(void 0,t);if(null!=r){if("function"==typeof r.unsubscribe)i=r,r=function(t){i.unsubscribe()};else if("function"!=typeof r)throw new TypeError(r+" is not a function");this._cleanup=r}}catch(e){return void t.error(e)}var i;u(this)&&s(this)}}function f(t){this._subscription=t}function h(t){if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}a(c.prototype={},{get closed(){return u(this)},unsubscribe:function(){l(this)}}),a(f.prototype={},{get closed(){return u(this._subscription)},next:function(t){var e=this._subscription;if(!u(e)){var n=e._observer;try{var r=o(n,"next");if(!r)return;return r.call(n,t)}catch(t){try{l(e)}finally{throw t}}}},error:function(t){var e=this._subscription;if(u(e))throw t;var n=e._observer;e._observer=void 0;try{var r=o(n,"error");if(!r)throw t;t=r.call(n,t)}catch(t){try{s(e)}finally{throw t}}return s(e),t},complete:function(t){var e=this._subscription;if(!u(e)){var n=e._observer;e._observer=void 0;try{var r=o(n,"complete");t=r?r.call(n,t):void 0}catch(t){try{s(e)}finally{throw t}}return s(e),t}}}),a(h.prototype,{subscribe:function(t){for(var e=[],n=1;n<arguments.length;++n)e.push(arguments[n]);return"function"==typeof t&&(t={next:t,error:e[0],complete:e[1]}),new c(t,this._subscriber)},forEach:function(t){var e=this;return new Promise((function(n,r){if("function"!=typeof t)return Promise.reject(new TypeError(t+" is not a function"));e.subscribe({_subscription:null,start:function(t){if(Object(t)!==t)throw new TypeError(t+" is not an object");this._subscription=t},next:function(e){var n=this._subscription;if(!n.closed)try{return t(e)}catch(t){r(t),n.unsubscribe()}},error:r,complete:n})}))},map:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(i(this.constructor))((function(n){return e.subscribe({next:function(e){if(!n.closed){try{e=t(e)}catch(t){return n.error(t)}return n.next(e)}},error:function(t){return n.error(t)},complete:function(t){return n.complete(t)}})}))},filter:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(i(this.constructor))((function(n){return e.subscribe({next:function(e){if(!n.closed){try{if(!t(e))return}catch(t){return n.error(t)}return n.next(e)}},error:function(t){return n.error(t)},complete:function(){return n.complete()}})}))},reduce:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=i(this.constructor),r=arguments.length>1,o=!1,a=arguments[1],s=a;return new n((function(n){return e.subscribe({next:function(e){if(!n.closed){var i=!o;if(o=!0,!i||r)try{s=t(s,e)}catch(t){return n.error(t)}else s=e}},error:function(t){return n.error(t)},complete:function(){o||r?(n.next(s),n.complete()):n.error(new TypeError("Cannot reduce an empty sequence"))}})}))},flatMap:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(i(this.constructor))((function(n){var r=!1,o=[],i=e.subscribe({next:function(e){if(t)try{e=t(e)}catch(t){return void n.error(t)}h.from(e).subscribe({_subscription:null,start:function(t){o.push(this._subscription=t)},next:function(t){n.next(t)},error:function(t){n.error(t)},complete:function(){var t=o.indexOf(this._subscription);t>=0&&o.splice(t,1),a()}})},error:function(t){return n.error(t)},complete:function(){r=!0,a()}});function a(){r&&0===o.length&&n.complete()}return function(t){o.forEach((function(t){return t.unsubscribe()})),i.unsubscribe()}}))}}),Object.defineProperty(h.prototype,r("observable"),{value:function(){return this},writable:!0,configurable:!0}),a(h,{from:function(t){var e="function"==typeof this?this:h;if(null==t)throw new TypeError(t+" is not an object");var i=o(t,r("observable"));if(i){var a=i.call(t);if(Object(a)!==a)throw new TypeError(a+" is not an object");return a.constructor===e?a:new e((function(t){return a.subscribe(t)}))}if(n("iterator")&&(i=o(t,r("iterator"))))return new e((function(e){for(var n,r=i.call(t)[Symbol.iterator]();!(n=r.next()).done;){var o=n.value;if(e.next(o),e.closed)return}e.complete()}));if(Array.isArray(t))return new e((function(e){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}));throw new TypeError(t+" is not observable")},of:function(){for(var t=[],e=0;e<arguments.length;++e)t.push(arguments[e]);var n="function"==typeof this?this:h;return new n((function(e){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}))}}),Object.defineProperty(h,r("species"),{get:function(){return this},configurable:!0}),t.Observable=h},void 0!==n?r(n):"undefined"!=typeof self&&r(self)},{}],44:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Adder=n.ARROW_POINTING_UP=n.ARROW_POINTING_DOWN=void 0;var r,o=t("preact"),i=(r=t("./components/adder-toolbar"))&&r.__esModule?r:{default:r},a=t("./util/shadow-root");function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.ARROW_POINTING_DOWN=1;function u(t){return t.toString()+"px"}n.ARROW_POINTING_UP=2;var l=function(){function t(e,n){var r=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._container=e,this._shadowRoot=(0,a.createShadowRoot)(e),Object.assign(e.style,{display:"block",position:"absolute",top:0,zIndex:1e4}),this._view=e.ownerDocument.defaultView,this._width=function(){return r._shadowRoot.firstChild.getBoundingClientRect().width},this._height=function(){return r._shadowRoot.firstChild.getBoundingClientRect().height},this._isVisible=!1,this._arrowDirection="up",this._onAnnotate=n.onAnnotate,this._onHighlight=n.onHighlight,this._onShowAnnotations=n.onShowAnnotations,this.annotationsForSelection=[],this._render()}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"hide",value:function(){this._isVisible=!1,this._render()}},{key:"target",value:function(t,e){var n,r,o;n=e?1:2;var i=Math.min(20,t.width);return o=e?t.left-this._width()/2+i:t.left+t.width-this._width()/2-i,t.top-this._height()<0&&1===n?n=2:t.top+this._height()>this._view.innerHeight&&(n=1),r=2===n?t.top+t.height+10:t.top-this._height()-10,o=Math.max(o,0),o=Math.min(o,this._view.innerWidth-this._width()),r=Math.max(r,0),{top:r=Math.min(r,this._view.innerHeight-this._height()),left:o,arrowDirection:n}}},{key:"showAt",value:function(t,e,n){var r=function(t){for(var e=t.parentElement;e.parentElement&&"static"===getComputedStyle(e).position;)e=e.parentElement;return e}(this._container).getBoundingClientRect();Object.assign(this._container.style,{top:u(e-r.top),left:u(t-r.left)}),this._isVisible=!0,this._arrowDirection=2===n?"up":"down",this._render()}},{key:"_render",value:function(){var t=this;(0,o.render)((0,o.createElement)(i.default,{isVisible:this._isVisible,arrowDirection:this._arrowDirection,onCommand:function(e){switch(e){case"annotate":t._onAnnotate(),t.hide();break;case"highlight":t._onHighlight(),t.hide();break;case"show":t._onShowAnnotations(t.annotationsForSelection)}},annotationCount:this.annotationsForSelection.length}),this._shadowRoot)}}]),t}();n.Adder=l},{"./components/adder-toolbar":54,"./util/shadow-root":84,preact:35}],45:[function(t,e,n){var r,o,i,a,s;s=t("./types"),r=s.RangeAnchor,o=s.TextPositionAnchor,i=s.TextQuoteAnchor,a=function(t,e,n,r){return new Promise((function(o,i){try{return o(t.fromSelector(e,n,r).toRange(r))}catch(t){return i(t)}}))},n.anchor=function(t,e,n){var s,u,l,c,f,h,d,p,g;for(null==n&&(n={}),c=null,h=null,d=null,s=0,u=(p=null!=e?e:[]).length;s<u;s++)switch((g=p[s]).type){case"TextPositionSelector":c=g,n.hint=c.start;break;case"TextQuoteSelector":h=g;break;case"RangeSelector":d=g}return l=function(t){if(null!=(null!=h?h.exact:void 0)&&t.toString()!==h.exact)throw new Error("quote mismatch");return t},f=Promise.reject("unable to anchor"),null!=d&&(f=f.catch((function(){return a(r,t,d,n).then(l)}))),null!=c&&(f=f.catch((function(){return a(o,t,c,n).then(l)}))),null!=h&&(f=f.catch((function(){return a(i,t,h,n)}))),f},n.describe=function(t,e,n){var a,s,u;return null==n&&(n={}),u=[r,o,i],function(){var r,o,i;for(i=[],r=0,o=u.length;r<o;r++){s=u[r];try{a=s.fromRange(t,e,n),i.push(a.toSelector(n))}catch(t){continue}}return i}()}},{"./types":49}],46:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.anchor=function(t,e){var n=e.find((function(t){return"TextPositionSelector"===t.type})),r=e.find((function(t){return"TextQuoteSelector"===t.type})),o=Promise.reject("unable to anchor");return n&&(o=o.catch((function(){return T(n.start).then((function(e){var o=e.index,i=e.offset,a=e.textContent,u=n.start-i,l=n.end-i,c=l-u;!function(t){if(r&&r.exact!==t.toString())throw new Error("quote mismatch")}(a.substr(u,c));var f=new s.TextPositionAnchor(t,u,l);return y(o,f)}))}))),r&&(o=o.catch((function(){if(n&&O[r.exact]&&O[r.exact][n.start]){var t=O[r.exact][n.start],e=t.pageIndex,o=t.anchor;return y(e,o)}return function(t){var e=E().pagesCount,n=Array(e).fill(0).map((function(t,e){return e}));return t?T(t.start).then((function(t){return function(t){for(var e=n.slice(0,t),r=n.slice(t),o=[];e.length>0||r.length>0;)r.length&&o.push(r.shift()),e.length&&o.push(e.pop());return o}(t.index)})):Promise.resolve(n)}(n).then((function(t){return A(t,r,n)}))}))),o},n.describe=function(t,e){var n=new i.BrowserRange(e).normalize(),o=S(n.start),a=S(n.end);if(o!==a)return Promise.reject(new Error("selecting across page breaks is not supported"));var u=n.limit(o),l=n.limit(a);if(!u||!l)return Promise.reject(new Error("range is outside text layer"));var c=function(t){return Array.from(t.parentNode.childNodes).indexOf(t)}(o.parentNode),f=_.call(document,o,NodeFilter.SHOW_TEXT),h=(0,r.default)(f,n.start),d=(0,r.default)(f,n.end)+h+n.end.textContent.length;return x(c).then((function(e){h+=e,d+=e;var n=new s.TextPositionAnchor(t,h,d).toSelector(),r=document.createRange();r.setStartBefore(u.start),r.setEndAfter(l.end);var o=s.TextQuoteAnchor.fromRange(t,r).toSelector();return Promise.all([n,o])}))},n.purgeCache=function(){w={},O={}};var r=u(t("dom-seek")),o=u(t("../pdfjs-rendering-states")),i=t("./range"),a=t("./text-position"),s=t("./types");function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function c(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}function f(t,e){return v(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||p(t,e)||d()}function h(t){return v(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||p(t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t){if(Array.isArray(t))return t}var y=function(t,e){return l(b(t),(function(t){if(t.renderingState===o.default.FINISHED&&t.textLayer&&t.textLayer.renderingDone){var n=t.textLayer.textLayerDiv;return(0,a.toRange)(n,e.start,e.end)}var r=t.div.querySelector(".annotator-placeholder");r||((r=document.createElement("span")).classList.add("annotator-placeholder"),r.textContent="Loading annotations",t.div.appendChild(r));var i=document.createRange();return i.setStartBefore(r),i.setEndAfter(r),i}))},m=c((function(t){return w[t]||(w[t]=function(t){return l(b(t),(function(t){return l(t.pdfPage.getTextContent({normalizeWhitespace:!0}),(function(t){return t.items.filter((function(t){return/\S/.test(t.str)})).map((function(t){return t.str})).join("")}))}))}(t)),w[t]})),b=c((function(t){var e=E(),n=e.getPageView(t);return function(t,e){var n=t();return n&&n.then?n.then(e):e(n)}((function(){if(!n||!n.pdfPage)return l(new Promise((function(n){document.addEventListener("pagesloaded",(function r(){document.removeEventListener("pagesloaded",r),n(e.getPageView(t))}))})),(function(t){n=t}))}),(function(){return n}))})),_=t("dom-node-iterator/polyfill")(),w={},O={};function S(t){for(;!t.classList||!t.classList.contains("page");)t=t.parentNode;return t.getElementsByClassName("textLayer")[0]}function E(){return PDFViewerApplication.pdfViewer}function x(t){var e=-1;return function n(r){return++e===t?Promise.resolve(r):m(e).then((function(t){return n(r+t.length)}))}(0)}function T(t){var e=0,n=0;return m(0).then((function r(o){var i=E().pagesCount-1;return n+o.length>t||e===i?(t=n,Promise.resolve({index:e,offset:t,textContent:o})):(++e,n+=o.length,m(e).then(r))}))}function A(t,e,n){if(0===t.length)return Promise.reject(new Error("Quote not found"));var r=h(t),o=r[0],i=r.slice(1),a=m(o),u=x(o);return Promise.all([a,u]).then((function(t){var r=f(t,2),o=r[0],i=r[1],a={textContent:o},u=s.TextQuoteAnchor.fromSelector(a,e);if(n){var l=n.start-i;return l=Math.max(0,l),l=Math.min(l,o.length),u.toPositionAnchor({hint:l})}return u.toPositionAnchor()})).then((function(t){return n&&(O[e.exact]||(O[e.exact]={}),O[e.exact][n.start]={pageIndex:o,anchor:t}),y(o,t)})).catch((function(){return A(i,e,n)}))}},{"../pdfjs-rendering-states":69,"./range":47,"./text-position":48,"./types":49,"dom-node-iterator/polyfill":28,"dom-seek":29}],47:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sniff=function(t){if(void 0!==t.commonAncestorContainer)return new d(t);if("string"==typeof t.start)return new g(t);if(t.start&&"object"===s(t.start))return new p(t);throw new Error("Could not sniff range type")},n.SerializedRange=n.NormalizedRange=n.BrowserRange=void 0;var r,o=(r=t("jquery"))&&r.__esModule?r:{default:r},i=t("./xpath"),a=t("./xpath-util");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}var d=function(){function t(e){c(this,t),this.commonAncestorContainer=e.commonAncestorContainer,this.startContainer=e.startContainer,this.startOffset=e.startOffset,this.endContainer=e.endContainer,this.endOffset=e.endOffset,this.tainted=!1}return h(t,[{key:"normalize",value:function(){if(this.tainted)throw new Error("You may only call normalize() once on a BrowserRange!");this.tainted=!0;var t={};if(this.startContainer.nodeType===Node.ELEMENT_NODE?(this.startOffset<this.startContainer.childNodes.length?t.start=(0,a.getFirstTextNodeNotBefore)(this.startContainer.childNodes[this.startOffset]):t.start=(0,a.getFirstTextNodeNotBefore)(this.startContainer),t.startOffset=0):(t.start=this.startContainer,t.startOffset=this.startOffset),this.endContainer.nodeType===Node.ELEMENT_NODE){var e=this.endContainer.childNodes[this.endOffset];if(e){for(var n=e;n&&n.nodeType!==Node.TEXT_NODE;)n=n.firstChild;n&&(t.end=n,t.endOffset=0)}t.end||(e=this.endOffset?this.endContainer.childNodes[this.endOffset-1]:this.endContainer.previousSibling,t.end=(0,a.getLastTextNodeUpTo)(e),t.endOffset=t.end.nodeValue.length)}else t.end=this.endContainer,t.endOffset=this.endOffset;var r={};for(t.startOffset>0?!t.start.nextSibling||t.start.nodeValue.length>t.startOffset?r.start=t.start.splitText(t.startOffset):r.start=(0,a.getFirstTextNodeNotBefore)(t.start.nextSibling):r.start=t.start,t.start===t.end?(r.start.nodeValue.length>t.endOffset-t.startOffset&&r.start.splitText(t.endOffset-t.startOffset),r.end=r.start):(t.end.nodeValue.length>t.endOffset&&t.end.splitText(t.endOffset),r.end=t.end),r.commonAncestor=this.commonAncestorContainer;r.commonAncestor.nodeType!==Node.ELEMENT_NODE;)r.commonAncestor=r.commonAncestor.parentNode;return new p(r)}},{key:"serialize",value:function(t,e){return this.normalize().serialize(t,e)}}]),t}();n.BrowserRange=d;var p=function(){function t(e){c(this,t),this.commonAncestor=e.commonAncestor,this.start=e.start,this.end=e.end}return h(t,[{key:"normalize",value:function(){return this}},{key:"limit",value:function(t){var e=o.default.grep(this.textNodes(),(function(e){return e.parentNode===t||o.default.contains(t,e.parentNode)}));if(!e.length)return null;this.start=e[0],this.end=e[e.length-1];var n,r=(0,o.default)(this.start).parents(),i=u((0,o.default)(this.end).parents());try{for(i.s();!(n=i.n()).done;){var a=n.value;if(-1!==r.index(a)){this.commonAncestor=a;break}}}catch(t){i.e(t)}finally{i.f()}return this}},{key:"serialize",value:function(t,e){var n=function(n,r){var s;s=e?(0,o.default)(n).parents(":not(".concat(e,")")).eq(0):(0,o.default)(n).parent();var l,c=(0,i.xpathFromNode)(s[0],null!=t?t:document),f=(0,a.getTextNodes)(s),h=0,d=u(f.slice(0,f.index(n)));try{for(d.s();!(l=d.n()).done;)h+=l.value.nodeValue.length}catch(t){d.e(t)}finally{d.f()}return r?[c,h+n.nodeValue.length]:[c,h]},r=n(this.start),s=n(this.end,!0);return new g({start:r[0],end:s[0],startOffset:r[1],endOffset:s[1]})}},{key:"text",value:function(){return this.textNodes().map((function(t){return t.nodeValue})).join("")}},{key:"textNodes",value:function(){var t=(0,a.getTextNodes)((0,o.default)(this.commonAncestor)),e=t.index(this.start),n=t.index(this.end);return o.default.makeArray(t.slice(e,+n+1||void 0))}},{key:"toRange",value:function(){var t=document.createRange();return t.setStartBefore(this.start),t.setEndAfter(this.end),t}}]),t}();n.NormalizedRange=p;var g=function(){function t(e){c(this,t),this.start=e.start,this.startOffset=e.startOffset,this.end=e.end,this.endOffset=e.endOffset}return h(t,[{key:"normalize",value:function(t){for(var e={},n=0,r=["start","end"];n<r.length;n++){var s=r[n],l=void 0;try{l=(0,i.nodeFromXPath)(this[s],t)}catch(t){throw new RangeError("Error while finding ".concat(s," node: ").concat(this[s],": ")+t)}var c=0,f=this[s+"Offset"];"end"===s&&f--;var h,p=u((0,a.getTextNodes)((0,o.default)(l)));try{for(p.s();!(h=p.n()).done;){var g=h.value;if(c+g.nodeValue.length>f){e[s+"Container"]=g,e[s+"Offset"]=this[s+"Offset"]-c;break}c+=g.nodeValue.length}}catch(t){p.e(t)}finally{p.f()}if(void 0===e[s+"Offset"])throw new RangeError("Couldn't find offset ".concat(this[s+"Offset"]," in element ").concat(this[s]))}return(0,o.default)(e.startContainer).parents().each((function(){return this,t=e.endContainer,!(16&this.compareDocumentPosition(t)&&(e.commonAncestorContainer=this,1));var t})),new d(e).normalize()}},{key:"serialize",value:function(t,e){return this.normalize(t).serialize(t,e)}},{key:"toObject",value:function(){return{start:this.start,startOffset:this.startOffset,end:this.end,endOffset:this.endOffset}}}]),t}();n.SerializedRange=g},{"./xpath":51,"./xpath-util":50,jquery:"jquery"}],48:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toRange=function(t,e,n){for(var r,o,i,a=t.ownerDocument.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1),s=0,u=0,l=0;(i=a.nextNode())&&(!r||!o);){var c=i.nodeValue;!r&&e>=l&&e<=l+c.length&&(r=i,s=e-l),!o&&n>=l&&n<=l+c.length&&(o=i,u=n-l),l+=c.length}if(!r)throw new Error("invalid start offset");if(!o)throw new Error("invalid end offset");var f=t.ownerDocument.createRange();return f.setStart(r,s),f.setEnd(o,u),f}},{}],49:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TextQuoteAnchor=n.TextPositionAnchor=n.RangeAnchor=void 0;var r=t("dom-anchor-text-position"),o=t("dom-anchor-text-quote"),i=t("./range");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}var l=function(){function t(e,n){a(this,t),this.root=e,this.range=(0,i.sniff)(n).normalize(this.root)}return u(t,[{key:"toRange",value:function(){return this.range.toRange()}},{key:"toSelector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.range.serialize(this.root,t.ignoreSelector);return{type:"RangeSelector",startContainer:e.start,startOffset:e.startOffset,endContainer:e.end,endOffset:e.endOffset}}}],[{key:"fromRange",value:function(e,n){return new t(e,n)}},{key:"fromSelector",value:function(e,n){var r={start:n.startContainer,startOffset:n.startOffset,end:n.endContainer,endOffset:n.endOffset};return new t(e,new i.SerializedRange(r))}}]),t}();n.RangeAnchor=l;var c=function(){function t(e,n,r){a(this,t),this.root=e,this.start=n,this.end=r}return u(t,[{key:"toSelector",value:function(){return{type:"TextPositionSelector",start:this.start,end:this.end}}},{key:"toRange",value:function(){return(0,r.toRange)(this.root,{start:this.start,end:this.end})}}],[{key:"fromRange",value:function(e,n){var o=(0,r.fromRange)(e,n);return t.fromSelector(e,o)}},{key:"fromSelector",value:function(e,n){return new t(e,n.start,n.end)}}]),t}();n.TextPositionAnchor=c;var f=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a(this,t),this.root=e,this.exact=n,this.context=r}return u(t,[{key:"toSelector",value:function(){return{type:"TextQuoteSelector",exact:this.exact,prefix:this.context.prefix,suffix:this.context.suffix}}},{key:"toRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,o.toRange)(this.root,this.toSelector(),t);if(null===e)throw new Error("Quote not found");return e}},{key:"toPositionAnchor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,o.toTextPosition)(this.root,this.toSelector(),t);if(null===e)throw new Error("Quote not found");return new c(this.root,e.start,e.end)}}],[{key:"fromRange",value:function(e,n){var r=(0,o.fromRange)(e,n);return t.fromSelector(e,r)}},{key:"fromSelector",value:function(e,n){var r=n.prefix,o=n.suffix;return new t(e,n.exact,{prefix:r,suffix:o})}}]),t}();n.TextQuoteAnchor=f},{"./range":47,"dom-anchor-text-position":6,"dom-anchor-text-quote":9}],50:[function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){var e=t.nodeName.toLowerCase(),n=e;return"#text"===e&&(n="text()"),n}function a(t){var e=i(t),n=function(t){for(var e=0,n=t;n;)n.nodeName===t.nodeName&&(e+=1),n=n.previousSibling;return e}(t);return"".concat(e,"[").concat(n,"]")}Object.defineProperty(n,"__esModule",{value:!0}),n.findChild=function(t,e,n){if(!t.hasChildNodes())throw new Error("XPath error: node has no children!");for(var r=t.childNodes,o=0,a=0;a<r.length;a++){var s=r[a];if(i(s)===e&&(o+=1)===n)return s}throw new Error("XPath error: wanted child not found.")},n.xpathFromNode=function(t,e){for(var n="",r=t;r!==e;){if(!r)throw new Error("Node is not a descendant of root");n=a(r)+"/"+n,r=r.parentNode}return(n="/"+n).replace(/\/$/,"")},n.getTextNodes=function(t){var e=function t(e){if(e&&e.nodeType!==Node.TEXT_NODE){var n=[];return e.nodeType!==Node.COMMENT_NODE&&r(e.childNodes).forEach((function(e){n.push(t(e))})),n}return e};return t.map((function(t,n){return function(t){return function t(e){var n=[];return e.forEach((function(e){n=e&&Array.isArray(e)?n.concat(t(e)):n.concat(e)})),n}(t)}(e(n))}))},n.getLastTextNodeUpTo=function t(e){switch(e.nodeType){case Node.TEXT_NODE:return e;case Node.ELEMENT_NODE:if(e.lastChild){var n=t(e.lastChild);if(n)return n}}var r=e.previousSibling;return r?t(r):null},n.getFirstTextNodeNotBefore=function t(e){switch(e.nodeType){case Node.TEXT_NODE:return e;case Node.ELEMENT_NODE:if(e.firstChild){var n=t(e.firstChild);if(n)return n}}var r=e.nextSibling;return r?t(r):null}},{}],51:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nodeFromXPath=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;function n(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return document.evaluate("."+t,e,n,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(n){return a(t,e)}}return n(t,e)},Object.defineProperty(n,"xpathFromNode",{enumerable:!0,get:function(){return r.xpathFromNode}});var r=t("./xpath-util");function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){var n=t.substring(1).split("/"),i=e;return n.forEach((function(t){var e=o(t.split("["),2),n=e[0],a=e[1];a=a?parseInt(a.split("]")[0]):1,i=(0,r.findChild)(i,n.toLowerCase(),a)})),i}},{"./xpath-util":50}],52:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){e.on(o.default.PUBLIC_ANNOTATION_COUNT_CHANGED,(function(e){var n=t.querySelectorAll("[data-hypothesis-annotation-count]");Array.from(n).forEach((function(t){t.textContent=e}))}))};var r,o=(r=t("../shared/bridge-events"))&&r.__esModule?r:{default:r}},{"../shared/bridge-events":95}],53:[function(t,e,n){"use strict";function r(t,e){var n=this;if(this.bridge=t,!e.on)throw new Error("options.on unspecified for AnnotationSync.");if(!e.emit)throw new Error("options.emit unspecified for AnnotationSync.");this.cache={},this._on=e.on,this._emit=e.emit,Object.keys(this._eventListeners).forEach((function(t){var e=n._eventListeners[t];n._on(t,(function(t){e.apply(n,[t])}))})),Object.keys(this._channelListeners).forEach((function(t){n.bridge.on(t,(function(e,r){n._channelListeners[t].apply(n,[e,r])}))}))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.cache=null,r.prototype.sync=function(t){var e;return t=function(){var e,n=[];for(e=0;e<t.length;e++)n.push(this._format(t[e]));return n}.call(this),this.bridge.call("sync",t,(e=this,function(t,n){var r,o=[];for(n=n||[],r=0;r<n.length;r++)o.push(e._parse(n[r]));return o})),this},r.prototype._channelListeners={deleteAnnotation:function(t,e){var n=this._parse(t);delete this.cache[n.$tag],this._emit("annotationDeleted",n),e(null,this._format(n))},loadAnnotations:function(t,e){var n=function(){var e,n=[];for(e=0;e<t.length;e++)n.push(this._parse(t[e]));return n}.call(this);return this._emit("annotationsLoaded",n),e(null,n)}},r.prototype._eventListeners={beforeAnnotationCreated:function(t){if(!t.$tag)return this._mkCallRemotelyAndParseResults("beforeCreateAnnotation")(t)}},r.prototype._mkCallRemotelyAndParseResults=function(t,e){return n=this,function(r){n.bridge.call(t,n._format(r),(function(t,r){null===t&&n._parseResults(r),"function"==typeof e&&e(t,r)}))};var n},r.prototype._parseResults=function(t){var e,n,r,o;for(r=0;r<t.length;r++)for(e=t[r],e=[].concat(e),o=0;o<e.length;o++)null!==(n=e[o])&&this._parse(n)},r.prototype._tag=function(t,e){return t.$tag||(e=e||window.btoa(Math.random().toString()),Object.defineProperty(t,"$tag",{value:e}),this.cache[e]=t),t},r.prototype._parse=function(t){var e=Object.assign(this.cache[t.tag]||{},t.msg);return this._tag(e,t.tag)},r.prototype._format=function(t){return this._tag(t),{tag:t.$tag,msg:t}}},{}],54:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var r=u(t("classnames")),o=t("preact"),i=u(t("prop-types")),a=t("../../shared/shortcut"),s=u(t("../../shared/components/svg-icon"));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){var e=t.badgeCount,n=t.icon,r=t.label,i=t.onClick,u=t.shortcut;(0,a.useShortcut)(u,i);var l=u?"".concat(r," (").concat(u,")"):r;return(0,o.createElement)("button",{className:"annotator-adder-button",onClick:i,"aria-label":l,title:l},n&&(0,o.createElement)(s.default,{name:n,className:"annotator-adder-button__icon"}),"number"==typeof e&&(0,o.createElement)("span",{className:"annotator-adder-button__badge"},e),(0,o.createElement)("span",{className:"annotator-adder-button__label"},r))}function c(t){var e=t.arrowDirection,n=t.isVisible,i=t.onCommand,a=t.annotationCount,u=void 0===a?0:a,c=function(t,e){t.preventDefault(),t.stopPropagation(),i(e)},f=n?"a":null,h=n?"h":null,d=n?"s":null;return(0,o.createElement)("hypothesis-adder-toolbar",{class:(0,r.default)("annotator-adder",{"annotator-adder--down":"up"===e,"annotator-adder--up":"down"===e,"is-active":n}),style:{visibility:n?"visible":"hidden"}},(0,o.createElement)("hypothesis-adder-actions",{className:"annotator-adder-actions"},(0,o.createElement)(l,{icon:"annotate",onClick:function(t){return c(t,"annotate")},label:"Annotate",shortcut:f}),(0,o.createElement)(l,{icon:"highlight",onClick:function(t){return c(t,"highlight")},label:"Highlight",shortcut:h}),u>0&&(0,o.createElement)("div",{className:"annotator-adder-actions__separator"}),u>0&&(0,o.createElement)(l,{badgeCount:u,onClick:function(t){return c(t,"show")},label:"Show",shortcut:d})),(0,o.createElement)(s.default,{name:"pointer",inline:!0,className:(0,r.default)("annotator-adder-arrow",{"annotator-adder-arrow--down":"down"===e,"annotator-adder-arrow--up":"up"===e})}))}l.propTypes={badgeCount:i.default.number,icon:i.default.string,label:i.default.string.isRequired,onClick:i.default.func.isRequired,shortcut:i.default.string},c.propTypes={arrowDirection:i.default.oneOf(["up","down"]).isRequired,isVisible:i.default.bool.isRequired,onCommand:i.default.func.isRequired,annotationCount:i.default.number}},{"../../shared/components/svg-icon":98,"../../shared/shortcut":103,classnames:2,preact:35,"prop-types":38}],55:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=s(t("classnames")),o=s(t("prop-types")),i=t("preact"),a=s(t("../../shared/components/svg-icon"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){var e=t.buttonRef,n=t.expanded,o=t.extraClasses,s=t.label,u=t.icon,l=t.onClick,c=t.selected,f=void 0!==c&&c;return(0,i.createElement)("button",{className:(0,r.default)("annotator-frame-button",o),"aria-label":s,"aria-expanded":n,"aria-pressed":f,onClick:function(t){t.stopPropagation(),l()},ref:e,title:s},(0,i.createElement)(a.default,{name:u}))}function l(t){var e=t.closeSidebar,n=t.createAnnotation,r=t.isSidebarOpen,o=t.newAnnotationType,a=t.showHighlights,s=t.toggleHighlights,l=t.toggleSidebar,c=t.toggleSidebarRef,f=t.useMinimalControls,h=void 0!==f&&f;return(0,i.createElement)("div",null,h&&r&&(0,i.createElement)(u,{extraClasses:"annotator-frame-button--sidebar_close",label:"Close annotation sidebar",icon:"cancel",onClick:e}),!h&&(0,i.createElement)(u,{extraClasses:"annotator-frame-button--sidebar_toggle",buttonRef:c,label:"Annotation sidebar",icon:r?"caret-right":"caret-left",expanded:r,onClick:l}),!h&&(0,i.createElement)(u,{label:"Show highlights",icon:a?"show":"hide",selected:a,onClick:s}),!h&&(0,i.createElement)(u,{label:"note"===o?"New page note":"New annotation",icon:"note"===o?"note":"annotate",onClick:n}))}u.propTypes={buttonRef:o.default.any,expanded:o.default.bool,extraClasses:o.default.string,label:o.default.string.isRequired,icon:o.default.string.isRequired,onClick:o.default.func.isRequired,selected:o.default.bool},l.propTypes={closeSidebar:o.default.func.isRequired,createAnnotation:o.default.func.isRequired,isSidebarOpen:o.default.bool.isRequired,newAnnotationType:o.default.oneOf(["annotation","note"]).isRequired,showHighlights:o.default.bool.isRequired,toggleHighlights:o.default.func.isRequired,toggleSidebar:o.default.func.isRequired,toggleSidebarRef:o.default.any,useMinimalControls:o.default.bool}},{"../../shared/components/svg-icon":98,classnames:2,preact:35,"prop-types":38}],56:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return t.hasOwnProperty("hypothesisConfig")?"function"!=typeof t.hypothesisConfig?(console.warn("hypothesisConfig must be a function, see: https://h.readthedocs.io/projects/client/en/latest/publishers/config/#window.hypothesisConfig"),{}):t.hypothesisConfig():{}}},{}],57:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=(0,o.default)(t);return{annotations:e.annotations,assetRoot:e.hostPageSetting("assetRoot",{allowInBrowserExt:!0}),branding:e.hostPageSetting("branding"),clientUrl:e.clientUrl,enableExperimentalNewNoteButton:e.hostPageSetting("enableExperimentalNewNoteButton"),experimental:e.hostPageSetting("experimental",{defaultValue:{}}),group:e.group,focus:e.hostPageSetting("focus"),theme:e.hostPageSetting("theme"),usernameUrl:e.hostPageSetting("usernameUrl"),onLayoutChange:e.hostPageSetting("onLayoutChange"),openSidebar:e.hostPageSetting("openSidebar",{allowInBrowserExt:!0,coerce:i.toBoolean}),query:e.query,requestConfigFromFrame:e.hostPageSetting("requestConfigFromFrame"),services:e.hostPageSetting("services"),showHighlights:e.showHighlights,sidebarAppUrl:e.sidebarAppUrl,subFrameIdentifier:e.hostPageSetting("subFrameIdentifier",{allowInBrowserExt:!0}),externalContainerSelector:e.hostPageSetting("externalContainerSelector")}};var r,o=(r=t("./settings"))&&r.__esModule?r:{default:r},i=t("../../shared/type-coercions")},{"../../shared/type-coercions":104,"./settings":59}],58:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return!(t.startsWith("http://")||t.startsWith("https://"))}},{}],59:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=o.jsonConfigsFrom(t.document),n=(0,i.default)(t);function r(){var e=t.document.querySelector('link[type="application/annotator+html"][rel="sidebar"]');if(!e)throw new Error('No application/annotator+html (rel="sidebar") link in the document');if(!e.href)throw new Error('application/annotator+html (rel="sidebar") link has no href');return e.href}function s(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.allowInBrowserExt||!1,s=void 0!==o.defaultValue,u="function"==typeof o.coerce?o.coerce:function(t){return t};return!i&&(0,a.default)(r())?s?o.defaultValue:null:n.hasOwnProperty(t)?u(n[t]):e.hasOwnProperty(t)?u(e[t]):s?o.defaultValue:null}return{get annotations(){return e.annotations||((n=t.location.href.match(/#annotations:([A-Za-z0-9_-]+)$/))?n[1]:null);var n},get clientUrl(){return function(){var e=t.document.querySelector('link[type="application/annotator+javascript"][rel="hypothesis-client"]');if(!e)throw new Error('No application/annotator+javascript (rel="hypothesis-client") link in the document');if(!e.href)throw new Error('application/annotator+javascript (rel="hypothesis-client") link has no href');return e.href}()},get group(){return e.group||((n=t.location.href.match(/#annotations:group:([A-Za-z0-9_-]+)$/))?n[1]:null);var n},get showHighlights(){return null===(t=s("showHighlights"))&&(t="always"),"boolean"==typeof t?t?"always":"never":t;var t},get sidebarAppUrl(){return r()},get query(){return e.query||function(){var e=t.location.href.match(/#annotations:(query|q):(.+)$/i);if(e)try{return decodeURIComponent(e[2])}catch(t){}return null}()},hostPageSetting:s}};var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(t("../../shared/settings")),i=s(t("./config-func-settings-from")),a=s(t("./is-browser-extension"));function s(t){return t&&t.__esModule?t:{default:t}}function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}},{"../../shared/settings":102,"./config-func-settings-from":56,"./is-browser-extension":58}],60:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("tiny-emitter");function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n),this.element=e;var o=e,i=o._hypothesisEventBus;i||(i=new r.TinyEmitter,o._hypothesisEventBus=i),this._eventBus=i,this._subscriptions=[]}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(t,[{key:"destroy",value:function(){var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}(this._subscriptions);try{for(e.s();!(t=e.n()).done;){var n=i(t.value,2),r=n[0],o=n[1];this._eventBus.off(r,o)}}catch(t){e.e(t)}finally{e.f()}}},{key:"publish",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(e=this._eventBus).emit.apply(e,[t].concat(o(n)))}},{key:"subscribe",value:function(t,e){this._eventBus.on(t,e),this._subscriptions.push([t,e])}},{key:"unsubscribe",value:function(t,e){this._eventBus.off(t,e),this._subscriptions=this._subscriptions.filter((function(n){var r=i(n,2),o=r[0],a=r[1];return o!==t||a!==e}))}}]),t}();n.default=f},{"tiny-emitter":41}],61:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(t("../shared/bridge-events")),o=i(t("../shared/warn-once"));function i(t){return t&&t.__esModule?t:{default:t}}var a={},s=function(t){a=t||{}},u={init:function(t){t.on(r.default.FEATURE_FLAGS_UPDATED,s)},reset:function(){s({})},flagEnabled:function(t){return t in a?a[t]:((0,o.default)("looked up unknown feature",t),!1)}};n.default=u},{"../shared/bridge-events":95,"../shared/warn-once":105}],62:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.DEBOUNCE_WAIT=void 0;var o,i=(o=t("lodash.debounce"))&&o.__esModule?o:{default:o},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(t("./util/frame-util"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.DEBOUNCE_WAIT=40;var f=function(){function t(e){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._target=e,this._handledFrames=[],this._mutationObserver=new MutationObserver((0,i.default)((function(){n._discoverFrames()}),40))}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(t,[{key:"observe",value:function(t,e){this._onFrameAdded=t,this._onFrameRemoved=e,this._discoverFrames(),this._mutationObserver.observe(this._target,{childList:!0,subtree:!0})}},{key:"disconnect",value:function(){this._mutationObserver.disconnect()}},{key:"_addFrame",value:function(t){var e=this;a.isAccessible(t)&&a.isDocumentReady(t,(function(){t.contentWindow.addEventListener("unload",(function(){e._removeFrame(t)})),e._handledFrames.push(t),e._onFrameAdded(t)}))}},{key:"_removeFrame",value:function(t){this._onFrameRemoved(t),this._handledFrames=this._handledFrames.filter((function(e){return e!==t}))}},{key:"_discoverFrames",value:function(){var t,e=a.findFrames(this._target),n=u(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._handledFrames.includes(r)||this._addFrame(r)}}catch(t){n.e(t)}finally{n.f()}var o,i=u(function(t,e){return t.filter((function(t){return!e.includes(t)}))}(this._handledFrames,e));try{for(i.s();!(o=i.n()).done;){var s=o.value;this._removeFrame(s)}}catch(t){i.e(t)}finally{i.f()}}}]),t}();n.default=f},{"./util/frame-util":82,"lodash.debounce":34}],63:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=v(t("custom-event")),o=v(t("scroll-into-view")),i=v(t("./delegator")),a=t("./adder"),s=g(t("./anchoring/html")),u=t("./anchoring/range"),l=t("./highlighter"),c=g(t("./range-util")),f=v(t("./selections")),h=t("../shared/dom-element"),d=t("./util/url");function p(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return p=function(){return t},t}function g(t){if(t&&t.__esModule)return t;if(null===t||"object"!==y(t)&&"function"!=typeof t)return{default:t};var e=p();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function v(t){return t&&t.__esModule?t:{default:t}}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t){return function(t){if(Array.isArray(t))return O(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=w(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||w(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){if(t){if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function C(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R(t);if(e){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t){return(0,l.getHighlightsContainingNode)(t).map((function(t){return t._annotation})).filter((function(t){return void 0!==t}))}var D='[class^="annotator-"],[class^="hypothesis-"]',I=function(t){C(n,i.default);var e=k(n);function n(t,r){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;T(this,n);var u={Document:{}};(o=e.call(this,t,E(E({},u),r))).visibleHighlights=!1,o.toolbar=null,o.adderToolbar=document.createElement("hypothesis-adder"),o.adderToolbar.style.display="none",o.element.appendChild(o.adderToolbar),o.adderCtrl=new a.Adder(o.adderToolbar,{onAnnotate:function(){o.createAnnotation(),document.getSelection().removeAllRanges()},onHighlight:function(){o.setVisibleHighlights(!0),o.createHighlight(),document.getSelection().removeAllRanges()},onShowAnnotations:function(t){o.selectAnnotations(t)}}),o.selections=(0,f.default)(document).subscribe({next:function(t){t?o._onSelection(t):o._onClearSelection()}}),o.plugins={},o.anchors=[],o.frameIdentifier=r.subFrameIdentifier||null,o.anchoring=i;var l={config:r,on:function(t,e){o.subscribe(t,e)},emit:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.publish(t,n)}};o.addPlugin("CrossFrame",l),o.crossframe=o.plugins.CrossFrame,o.crossframe.onConnect((function(){return o._setupInitialState(r)})),o.closeSidebarOnDocumentClick=!0,o._connectAnnotationSync(),o._connectAnnotationUISync(o.crossframe);for(var c=0,h=Object.keys(o.options);c<h.length;c++){var d=h[c],p=o.options[d];!o.plugins[d]&&o.options.pluginClasses[d]&&o.addPlugin(d,p)}return o._elementEventListeners=[],o._setupElementEvents(),o}return function(t,e,n){e&&A(t.prototype,e),n&&A(t,n)}(n,[{key:"_setupElementEvents",value:function(){var t=this,e=function(e,n){t.element.addEventListener(e,n),t._elementEventListeners.push({event:e,callback:n})},n=function(e){var n;t.closeSidebarOnDocumentClick&&!t.isEventInAnnotator(e)&&(null===(n=t.crossframe)||void 0===n||n.call("hideSidebar"))};e("click",(function(e){var r=M(e.target);if(r.length&&t.visibleHighlights){var o=e.metaKey||e.ctrlKey;t.selectAnnotations(r,o)}else n(e)})),e("touchstart",(function(t){M(t.target).length||n(t)})),e("mouseover",(function(e){var n=M(e.target);n.length&&t.visibleHighlights&&t.focusAnnotations(n)})),e("mouseout",(function(){t.visibleHighlights&&t.focusAnnotations([])}))}},{key:"_removeElementEvents",value:function(){var t=this;this._elementEventListeners.forEach((function(e){var n=e.event,r=e.callback;t.element.removeEventListener(n,r)}))}},{key:"addPlugin",value:function(t,e){var n,r,o=this.options.pluginClasses[t];this.plugins[t]=new o(this.element,e),this.plugins[t].annotator=this,null===(n=(r=this.plugins[t]).pluginInit)||void 0===n||n.call(r)}},{key:"getDocumentInfo",value:function(){var t,e,n=this;return this.plugins.PDF?(t=Promise.resolve(this.plugins.PDF.getMetadata()),e=Promise.resolve(this.plugins.PDF.uri())):this.plugins.Document?(e=Promise.resolve(this.plugins.Document.uri()),t=Promise.resolve(this.plugins.Document.metadata)):(e=Promise.reject(),t=Promise.reject()),e=e.catch((function(){return decodeURIComponent(window.location.href)})),t=t.catch((function(){return{title:document.title,link:[{href:decodeURIComponent(window.location.href)}]}})),Promise.all([t,e]).then((function(t){var e=_(t,2),r=e[0],o=e[1];return{uri:(0,d.normalizeURI)(o),metadata:r,frameIdentifier:n.frameIdentifier}}))}},{key:"_setupInitialState",value:function(t){this.publish("panelReady"),this.setVisibleHighlights("always"===t.showHighlights)}},{key:"_connectAnnotationSync",value:function(){var t=this;this.subscribe("annotationDeleted",(function(e){t.detach(e)})),this.subscribe("annotationsLoaded",(function(e){e.map((function(e){return t.anchor(e)}))}))}},{key:"_connectAnnotationUISync",value:function(t){var e=this;t.on("focusAnnotations",(function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=b(e.anchors);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.highlights){var i=n.includes(o.annotation.$tag);(0,l.setHighlightsFocused)(o.highlights,i)}}}catch(t){r.e(t)}finally{r.f()}})),t.on("scrollToAnnotation",(function(t){var n,i=b(e.anchors);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.highlights&&a.annotation.$tag===t){var s=new r.default("scrolltorange",{bubbles:!0,cancelable:!0,detail:a.range});e.element.dispatchEvent(s)&&(0,o.default)(a.highlights[0])}}}catch(t){i.e(t)}finally{i.f()}})),t.on("getDocumentInfo",(function(t){e.getDocumentInfo().then((function(e){return t(null,e)})).catch((function(e){return t(e)}))})),t.on("setVisibleHighlights",(function(t){e.setVisibleHighlights(t)}))}},{key:"destroy",value:function(){this._removeElementEvents(),this.selections.unsubscribe(),this.adderToolbar.remove(),(0,l.removeAllHighlights)(this.element);for(var t=0,e=Object.keys(this.plugins);t<e.length;t++){var r=e[t];this.plugins[r].destroy()}P(R(n.prototype),"destroy",this).call(this)}},{key:"anchor",value:function(t){var e,n=this,r=this.element,o=[],i=[],a=[];t.target||(t.target=[]);var s,c=function(e){var o;if(!(null!==(o=e.selector)&&void 0!==o?o:[]).some((function(t){return"TextQuoteSelector"===t.type})))return Promise.resolve({annotation:t,target:e});var i={ignoreSelector:D};return n.anchoring.anchor(r,e.selector,i).then((function(n){return{annotation:t,target:e,range:n}})).catch((function(){return{annotation:t,target:e}}))},f=function(t){if(!t.range)return t;var e=(0,u.sniff)(t.range).normalize(r),n=(0,l.highlightRange)(e);return n.forEach((function(e){e._annotation=t.annotation})),t.highlights=n,t},h=b(this.anchors.splice(0,this.anchors.length));try{for(h.s();!(s=h.n()).done;)(e=s.value).annotation===t?e.range&&t.target.includes(e.target)?(o.push(e),i.push(e.target)):e.highlights&&(a=a.concat(e.highlights),delete e.highlights,delete e.range):this.anchors.push(e)}catch(t){h.e(t)}finally{h.f()}requestAnimationFrame((function(){return(0,l.removeHighlights)(a)}));var d,p=b(t.target);try{for(p.s();!(d=p.n()).done;){var g=d.value;i.includes(g)||(e=c(g).then(f),o.push(e))}}catch(t){p.e(t)}finally{p.f()}return Promise.all(o).then((function(e){var r,o,i,a=!1,s=!1,u=b(e);try{for(u.s();!(i=u.n()).done;){var l=i.value;if(l.target.selector&&(a=!0,l.range)){s=!0;break}}}catch(t){u.e(t)}finally{u.f()}return t.$orphan=a&&!s,n.anchors=n.anchors.concat(e),null===(r=n.plugins.BucketBar)||void 0===r||r.update(),null===(o=n.plugins.CrossFrame)||void 0===o||o.sync([t]),e}))}},{key:"detach",value:function(t){var e,n=this,r=[],o=[],i=b(this.anchors);try{for(i.s();!(e=i.n()).done;){var a,s=e.value;s.annotation===t?o.push.apply(o,m(null!==(a=s.highlights)&&void 0!==a?a:[])):r.push(s)}}catch(t){i.e(t)}finally{i.f()}this.anchors=r,requestAnimationFrame((function(){var t;(0,l.removeHighlights)(o),null===(t=n.plugins.BucketBar)||void 0===t||t.update()}))}},{key:"createAnnotation",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.element,o=null!==(t=this.selectedRanges)&&void 0!==t?t:[];this.selectedRanges=null;var i=function(t){var n={ignoreSelector:D};return e.anchoring.describe(r,t,n)},a=function(t){n.document=t.metadata,n.uri=t.uri},s=function(t){var e=_(t,2),r=e[0],o=e[1],i=r.uri;n.target=o.map((function(t){return{source:i,selector:t}}))},u=this.getDocumentInfo();u.then(a);var l,c=Promise.all(o.map(i)),f=Promise.all([u,c]).then(s);return f.then((function(){return e.publish("beforeAnnotationCreated",[n])})),f.then((function(){return e.anchor(n)})),n.$highlight||null===(l=this.crossframe)||void 0===l||l.call("showSidebar"),n}},{key:"createHighlight",value:function(){return this.createAnnotation({$highlight:!0})}},{key:"showAnnotations",value:function(t){var e,n,r=t.map((function(t){return t.$tag}));null===(e=this.crossframe)||void 0===e||e.call("showAnnotations",r),null===(n=this.crossframe)||void 0===n||n.call("showSidebar")}},{key:"toggleAnnotationSelection",value:function(t){var e,n=t.map((function(t){return t.$tag}));null===(e=this.crossframe)||void 0===e||e.call("toggleAnnotationSelection",n)}},{key:"focusAnnotations",value:function(t){var e,n=t.map((function(t){return t.$tag}));null===(e=this.crossframe)||void 0===e||e.call("focusAnnotations",n)}},{key:"_onSelection",value:function(t){var e=document.getSelection(),n=c.isSelectionBackwards(e),r=c.selectionFocusRect(e);if(r){this.selectedRanges=[t],this.toolbar&&(this.toolbar.newAnnotationType="annotation");var o=this.adderCtrl.target(r,n),i=o.left,a=o.top,s=o.arrowDirection;this.adderCtrl.annotationsForSelection=function(){var t=window.getSelection().getRangeAt(0);return c.itemsForRange(t,(function(t){return t._annotation}))}(),this.adderCtrl.showAt(i,a,s)}else this._onClearSelection()}},{key:"_onClearSelection",value:function(){this.adderCtrl.hide(),this.selectedRanges=[],this.toolbar&&(this.toolbar.newAnnotationType="note")}},{key:"selectAnnotations",value:function(t,e){e?this.toggleAnnotationSelection(t):this.showAnnotations(t)}},{key:"isEventInAnnotator",value:function(t){return null!==(0,h.closest)(t.target,".annotator-frame")}},{key:"setVisibleHighlights",value:function(t){(0,l.setHighlightsVisible)(this.element,t),this.visibleHighlights=t,this.toolbar&&(this.toolbar.highlightsVisible=t)}}]),n}();n.default=I},{"../shared/dom-element":100,"./adder":44,"./anchoring/html":45,"./anchoring/range":47,"./delegator":60,"./highlighter":64,"./range-util":77,"./selections":78,"./util/url":85,"custom-event":3,"scroll-into-view":40}],64:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.highlightRange=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hypothesis-highlight",n=/^\s*$/,o=t.textNodes(),i=o.length>0&&null!==(0,r.closest)(o[0].parentNode,".annotator-placeholder"),a=[],u=null,l=null;o.forEach((function(t){u&&u.nextSibling===t?l.push(t):(l=[t],a.push(l)),u=t})),a=a.filter((function(t){return t.some((function(t){return!n.test(t.nodeValue)}))}));var c=[];return a.forEach((function(t){var n=document.createElement("hypothesis-highlight");if(n.className=e,t[0].parentNode.replaceChild(n,t[0]),t.forEach((function(t){return n.appendChild(t)})),!i){var r=s(n);r&&(n.className+=" is-transparent",n.svgHighlight=r)}c.push(n)})),c},n.removeAllHighlights=function(t){l(Array.from(t.querySelectorAll("hypothesis-highlight")))},n.removeHighlights=l,n.setHighlightsFocused=function(t,e){t.forEach((function(t){return t.classList.toggle("hypothesis-highlight-focused",e)}))},n.setHighlightsVisible=function(t,e){t.classList.toggle("hypothesis-highlights-always-on",e)},n.getHighlightsContainingNode=function(t){for(var e=t.nodeType===Node.ELEMENT_NODE?t:t.parentElement,n=[];e;)e.classList.contains("hypothesis-highlight")&&n.push(e),e=e.parentElement;return n},n.getBoundingClientRect=function(t){return t.map((function(t){return t.getBoundingClientRect()})).reduce((function(t,e){return{top:Math.min(t.top,e.top),left:Math.min(t.left,e.left),bottom:Math.max(t.bottom,e.bottom),right:Math.max(t.right,e.right)}}))};var r=t("../shared/dom-element");function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a="http://www.w3.org/2000/svg";function s(t){var e=function(t){var e=(0,r.closest)(t,".page");return e&&e.querySelector(".canvasWrapper > canvas")||null}(t);if(!e||!e.parentElement)return null;var n=e.parentElement.querySelector(".hypothesis-highlight-layer"),o=function(t,e){return"function"==typeof CSS&&"function"==typeof CSS.supports&&CSS.supports(t,e)}("mix-blend-mode","multiply");if(!n){(n=document.createElementNS(a,"svg")).setAttribute("class","hypothesis-highlight-layer"),e.parentElement.appendChild(n),e.parentElement.style.position="relative";var i=n.style;i.position="absolute",i.left="0",i.top="0",i.width="100%",i.height="100%",o?i.mixBlendMode="multiply":i.opacity="0.3"}var s=e.getBoundingClientRect(),u=t.getBoundingClientRect(),l=document.createElementNS(a,"rect");return l.setAttribute("x",(u.left-s.left).toString()),l.setAttribute("y",(u.top-s.top).toString()),l.setAttribute("width",u.width.toString()),l.setAttribute("height",u.height.toString()),o?l.setAttribute("class","hypothesis-svg-highlight"):l.setAttribute("class","hypothesis-svg-highlight is-opaque"),n.appendChild(l),l}function u(t,e){var n=t.parentNode;e.forEach((function(e){return n.insertBefore(e,t)})),t.remove()}function l(t){var e,n=o(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.parentNode&&u(r,Array.from(r.childNodes)),r.svgHighlight&&r.svgHighlight.remove()}}catch(t){n.e(t)}finally{n.f()}}},{"../shared/dom-element":100}],65:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("./guest"))&&r.__esModule?r:{default:r};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){c(n,o.default);var e=h(n);function n(t,r){var o,i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(null===(o=r.services)||void 0===o?void 0:o.length)>0){var u=r.services[0];u.onLoginRequest&&(u.onLoginRequestProvided=!0),u.onLogoutRequest&&(u.onLogoutRequestProvided=!0),u.onSignupRequest&&(u.onSignupRequestProvided=!0),u.onProfileRequest&&(u.onProfileRequestProvided=!0),u.onHelpRequest&&(u.onHelpRequestProvided=!0)}var l=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r);["sidebarAppUrl","pluginClasses"].forEach((function(t){return delete l[t]}));var c="config="+encodeURIComponent(JSON.stringify(l)),f=r.sidebarAppUrl+"#"+c,h=document.createElement("iframe");h.setAttribute("name","hyp_sidebar_frame"),h.setAttribute("allowfullscreen",""),h.setAttribute("seamless",""),h.src=f,h.title="Hypothesis annotation viewer",h.className="h-sidebar-iframe";var d,p,g=null;return r.externalContainerSelector&&(g=document.querySelector(r.externalContainerSelector)),g?d=g:((p=document.createElement("div")).style.display="none",p.className="annotator-frame annotator-outer","clean"===r.theme&&p.classList.add("annotator-frame--drop-shadow-enabled"),t.appendChild(p)),(i=e.call(this,t,r)).externalFrame=d,i.frame=p,(p||d).appendChild(h),i.subscribe("panelReady",(function(){i.frame&&(i.frame.style.display="")})),i.subscribe("beforeAnnotationCreated",(function(t){t.$highlight||h.contentWindow.focus()})),i}return function(t,e,n){e&&u(t.prototype,e),n&&u(t,n)}(n,[{key:"destroy",value:function(){var t;null===(t=this.frame)||void 0===t||t.remove(),l(p(n.prototype),"destroy",this).call(this)}}]),n}();n.default=g},{"./guest":63}],66:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={annotate:t("../images/icons/annotate.svg"),cancel:t("../images/icons/cancel.svg"),"caret-left":t("../images/icons/caret-left.svg"),"caret-right":t("../images/icons/caret-right.svg"),hide:t("../images/icons/hide.svg"),highlight:t("../images/icons/highlight.svg"),note:t("../images/icons/note.svg"),pointer:t("../images/icons/pointer.svg"),show:t("../images/icons/show.svg")};n.default=r},{"../images/icons/annotate.svg":86,"../images/icons/cancel.svg":87,"../images/icons/caret-left.svg":88,"../images/icons/caret-right.svg":89,"../images/icons/hide.svg":90,"../images/icons/highlight.svg":91,"../images/icons/note.svg":92,"../images/icons/pointer.svg":93,"../images/icons/show.svg":94}],67:[function(t,e,n){"use strict";var r=p(t("jquery"));t("focus-visible");var o=t("../shared/components/svg-icon"),i=p(t("./icons")),a=p(t("./config/index")),s=p(t("./plugin/cross-frame")),u=p(t("./plugin/document")),l=p(t("./guest")),c=p(t("./plugin/pdf")),f=p(t("./pdf-sidebar")),h=p(t("./sidebar")),d=p(t("./plugin/bucket-bar"));function p(t){return t&&t.__esModule?t:{default:t}}(0,o.registerIcons)(i.default);var g={BucketBar:d.default,PDF:c.default,Document:u.default,CrossFrame:s.default},v=window,y=document.querySelector('link[type="application/annotator+html"][rel="sidebar"]'),m=(0,a.default)(window);r.default.noConflict(!0)((function(){var t=void 0!==v.PDFViewerApplication,e=t?f.default:h.default;m.subFrameIdentifier&&(t&&(m.PDF={}),e=l.default,v.__hypothesis_frame=!0),m.pluginClasses=g;var n=new e(document.body,m);y.addEventListener("destroy",(function(){y.remove(),n.destroy()}))}))},{"../shared/components/svg-icon":98,"./config/index":57,"./guest":63,"./icons":66,"./pdf-sidebar":68,"./plugin/bucket-bar":72,"./plugin/cross-frame":73,"./plugin/document":74,"./plugin/pdf":76,"./sidebar":80,"focus-visible":31,jquery:"jquery"}],68:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("./sidebar"))&&r.__esModule?r:{default:r};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g={PDF:{},BucketBar:{container:".annotator-frame",scrollables:["#viewerContainer"]}},v=function(t){c(n,o.default);var e=h(n);function n(t,r){var o,i,a,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(u=e.call(this,t,s(s({},g),r)))._lastSidebarLayoutState={expanded:!1,width:0,height:0},u.window=window,u.pdfViewer=null===(o=u.window.PDFViewerApplication)||void 0===o?void 0:o.pdfViewer,u.pdfContainer=null===(i=u.window.PDFViewerApplication)||void 0===i||null===(a=i.appConfig)||void 0===a?void 0:a.appContainer,u.sideBySideActive=!1,u.subscribe("sidebarLayoutChanged",(function(t){return u.fitSideBySide(t)})),u.window.addEventListener("resize",(function(){return u.fitSideBySide()})),u}return function(t,e,n){e&&l(t.prototype,e),n&&l(t,n)}(n,[{key:"activateSideBySide",value:function(t){this.sideBySideActive=!0,this.closeSidebarOnDocumentClick=!1,this.pdfContainer.style.width=t+"px",this.pdfContainer.classList.add("hypothesis-side-by-side")}},{key:"deactivateSideBySide",value:function(){this.sideBySideActive=!1,this.closeSidebarOnDocumentClick=!0,this.pdfContainer.style.width="auto",this.pdfContainer.classList.remove("hypothesis-side-by-side")}},{key:"fitSideBySide",value:function(t){t||(t=this._lastSidebarLayoutState);var e=this.window.innerWidth-t.width;t.expanded&&e>=680?this.activateSideBySide(e):this.deactivateSideBySide();var n=this.pdfViewer.currentScaleValue;"auto"!==n&&"page-fit"!==n&&"page-width"!==n||(this.pdfViewer.currentScaleValue=n),this.pdfViewer.update(),this._lastSidebarLayoutState=t}}]),n}();n.default=v},{"./sidebar":80}],69:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};n.default=r},{}],70:[function(t,e,n){var r,o={}.hasOwnProperty;r=t("./delegator").default,e.exports=function(t){function e(t,n){e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,r),e.prototype.pluginInit=function(){},e}()},{"./delegator":60}],71:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.findClosestOffscreenAnchor=function(t,e){var n,i=null,a=0,s=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}(t);try{for(s.s();!(n=s.n()).done;){var u,l=n.value;if(null===(u=l.highlights)||void 0===u?void 0:u.length){var c=(0,r.getBoundingClientRect)(l.highlights).top;"up"===e&&c>=137||"down"===e&&c<=window.innerHeight-22||(!i||"up"===e&&c>a||"down"===e&&c<a)&&(i=l,a=c)}}}catch(t){s.e(t)}finally{s.f()}return i};var r=t("../highlighter");function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},{"../highlighter":64}],72:[function(t,e,n){var r,o,i,a,s,u,l,c,f,h={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=t("jquery"),s=t("../plugin"),c=t("scroll-into-view"),u=t("./bucket-bar-js").findClosestOffscreenAnchor,l=t("../highlighter"),i=115+(o=6+16),f=function(t,e){var n;return n=u(t,e),c(n.highlights[0])},e.exports=a=function(t){function e(t,n){var o,i;this.update=function(t,e){return function(){return t.apply(e,arguments)}}(this.update,this),o={gapSize:60,scrollables:["body"]},e.__super__.constructor.call(this,r(this.html),Object.assign(o,n)),null!=this.options.container?r(this.options.container).append(this.element):r(t).append(this.element),this.highlighter=null!=(i=n.highlighter)?i:l}return function(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,s),e.prototype.html='<div class="annotator-bucket-bar">\n</div>',e.prototype.buckets=[],e.prototype.index=[],e.prototype.tabs=null,e.prototype.pluginInit=function(){var t,e,n,o,i,a;for(r(window).on("resize scroll",this.update),i=[],t=0,e=(o=null!=(n=this.options.scrollables)?n:[]).length;t<e;t++)a=o[t],i.push(r(a).on("resize scroll",this.update));return i},e.prototype.destroy=function(){var t,e,n,o,i,a;for(r(window).off("resize scroll",this.update),i=[],t=0,e=(o=null!=(n=this.options.scrollables)?n:[]).length;t<e;t++)a=o[t],i.push(r(a).off("resize scroll",this.update));return i},e.prototype._collate=function(t,e){var n,r,o;for(n=r=0,o=t.length-1;0<=o?r<=o:r>=o;n=0<=o?++r:--r){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},e.prototype.update=function(){var t;if(null==this._updatePending)return this._updatePending=requestAnimationFrame((t=this,function(){return delete t._updatePending,t._update()}))},e.prototype._update=function(){var t,e,n,a,s,u,l,c,h,p,g;for(t=[],n=[],c=this.annotator.anchors.reduce((g=this,function(e,r,a){var s,u,l,c;return(null!=(l=r.highlights)?l.length:void 0)?(c=(u=g.highlighter.getBoundingClientRect(r.highlights)).top,s=u.bottom-u.top,c<i?d.call(t,r)<0&&t.push(r):c>window.innerHeight-o?d.call(n,r)<0&&n.push(r):(e.push([c,1,r]),e.push([c+s,-1,r])),e):e}),[]),h=c.sort(this._collate).reduce(function(t){return function(e,n,r,o){var i,a,s,u,l,c,f,h,p,g,v,y,m,b,_,w;if(s=e.buckets,c=e.index,u=e.carry,w=n[0],l=n[1],i=n[2],l>0?(f=u.anchors.indexOf(i))<0?(u.anchors.unshift(i),u.counts.unshift(1)):u.counts[f]++:(f=u.anchors.indexOf(i),0==--u.counts[f]&&(u.anchors.splice(f,1),u.counts.splice(f,1))),0===c.length||r===o.length-1||0===u.anchors.length||w-c[c.length-1]>t.options.gapSize)s.push(u.anchors.slice()),c.push(w);else{for((null!=(m=s[s.length-2])?m.length:void 0)?(g=s[s.length-2],_=s.pop(),c.pop()):(g=s[s.length-1],_=[]),h=0,v=(b=u.anchors).length;h<v;h++)a=b[h],d.call(g,a)<0&&g.push(a);for(p=0,y=_.length;p<y;p++)a=_[p],d.call(g,a)<0&&g.push(a)}return{buckets:s,index:c,carry:u}}}(this),{buckets:[],index:[],carry:{anchors:[],counts:[],latest:0}}),this.buckets=h.buckets,this.index=h.index,this.buckets.unshift([],t,[]),this.index.unshift(0,i-1,i),this.buckets.push([],n,[]),this.index.push(window.innerHeight-o,window.innerHeight-o+1,window.innerHeight),l=0,s=0,u=(p=this.buckets).length;s<u;s++)e=p[s],l=Math.max(l,e.length);return a=this.element,this.tabs||(this.tabs=r([])),this.tabs.slice(this.buckets.length).remove(),this.tabs=this.tabs.slice(0,this.buckets.length),r.each(this.buckets.slice(this.tabs.length),function(t){return function(){var e;return e=r("<div/>").appendTo(a),t.tabs.push(e[0]),e.addClass("annotator-bucket-indicator").on("mousemove",(function(e){var n,o,i,a,s,u,l;for(o=t.tabs.index(e.currentTarget),u=[],i=0,a=(s=t.annotator.anchors).length;i<a;i++)n=s[i],l=d.call(t.buckets[o],n)>=0,u.push(r(n.highlights).toggleClass("hypothesis-highlight-focused",l));return u})).on("mouseout",(function(e){var n,o,i,a,s,u;for(o=t.tabs.index(e.currentTarget),u=[],i=0,a=(s=t.buckets[o]).length;i<a;i++)n=s[i],u.push(r(n.highlights).removeClass("hypothesis-highlight-focused"));return u})).on("click",(function(e){var n,r,o;return o=t.tabs.index(e.currentTarget),e.stopPropagation(),t.isUpper(o)?f(t.buckets[o],"up"):t.isLower(o)?f(t.buckets[o],"down"):(r=function(){var t,e,r,i;for(i=[],t=0,e=(r=this.buckets[o]).length;t<e;t++)n=r[t],i.push(n.annotation);return i}.call(t),t.annotator.selectAnnotations(r,e.ctrlKey||e.metaKey))}))}}(this)),this._buildTabs(this.tabs,this.buckets)},e.prototype._buildTabs=function(){return this.tabs.each((t=this,function(e,n){var i,a,s,u;if(n=r(n),u=1!==(a=null!=(i=t.buckets[e])?i.length:void 0)?"Show "+a+" annotations":a>0?"Show one annotation":void 0,n.attr("title",u),n.toggleClass("upper",t.isUpper(e)),n.toggleClass("lower",t.isLower(e)),s=t.isUpper(e)||t.isLower(e)?o:16,n.css({top:(t.index[e]+t.index[e+1])/2,marginTop:-s/2,display:a?"":"none"}),i)return n.html("<div class='label'>"+a+"</div>")}));var t},e.prototype.isUpper=function(t){return 1===t},e.prototype.isLower=function(t){return t===this.index.length-2},e}(),a.BUCKET_SIZE=16,a.BUCKET_NAV_SIZE=o,a.BUCKET_TOP_THRESHOLD=i},{"../highlighter":64,"../plugin":70,"./bucket-bar-js":71,jquery:"jquery","scroll-into-view":40}],73:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=c(t("../plugin")),o=c(t("../annotation-sync")),i=c(t("../../shared/bridge")),a=c(t("../../shared/discovery")),s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==f(t)&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(t("../util/frame-util")),u=c(t("../frame-observer"));function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function c(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t,e,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(t){g(n,r.default);var e=y(n);function n(t,r){var l,c;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),c=e.call(this,t,r);var f=r.config,h=r.server,p=r.on,g=r.emit,v=new a.default(window,{server:h}),y=new i.default,m=new o.default(y,{on:p,emit:g}),O=new u.default(t),S=new Map,E=function(t){if(!s.hasHypothesis(t)){var e=f.clientUrl;s.isLoaded(t,(function(){var n=v.generateToken();S.set(t,n);var r=d(d({},f),{},{subFrameIdentifier:n});s.injectHypothesis(t,e,r)}))}},x=function(t){y.call("destroyFrame",S.get(t)),S.delete(t)};return c.pluginInit=function(){v.startDiscovery((function(t,e,n){return y.createChannel(t,e,n)})),O.observe(E,x)},c.destroy=function(){y.destroy(),v.stopDiscovery(),O.disconnect(),_((l=b(c),w(n.prototype)),"destroy",l).call(l)},c.sync=function(t){return m.sync(t)},c.on=function(t,e){return y.on(t,e)},c.call=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return y.call.apply(y,[t].concat(n))},c.onConnect=function(t){return y.onConnect(t)},c}return n}();n.default=O},{"../../shared/bridge":96,"../../shared/discovery":99,"../annotation-sync":53,"../frame-observer":62,"../plugin":70,"../util/frame-util":82}],74:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("document-base-uri")),o=a(t("../plugin")),i=t("../util/url");function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(){return{title:document.title,link:[],dc:{},eprints:{},facebook:{},highwire:{},prism:{},twitter:{}}}var y=function(t){f(n,o.default);var e=d(n);function n(t,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(a=e.call(this,t,o)).metadata=v(),a.baseURI=o.baseURI||r.default,a.document=o.document||document,a.normalizeURI=o.normalizeURI||i.normalizeURI,a.beforeAnnotationCreated=function(t){t.document=a.metadata},a.subscribe("beforeAnnotationCreated",a.beforeAnnotationCreated),a}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(n,[{key:"destroy",value:function(){this.unsubscribe("beforeAnnotationCreated",this.beforeAnnotationCreated)}},{key:"pluginInit",value:function(){this.getDocumentMetadata()}},{key:"uri",value:function(){var t,e=decodeURIComponent(this._getDocumentHref()),n=u(this.metadata.link);try{for(n.s();!(t=n.n()).done;){var r=t.value;"canonical"===r.rel&&(e=r.href)}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"uris",value:function(){var t,e={},n=u(this.metadata.link);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.href&&(e[r.href]=!0)}}catch(t){n.e(t)}finally{n.f()}return Object.keys(e)}},{key:"getDocumentMetadata",value:function(){return this.metadata=v(),this._getHighwire(),this._getDublinCore(),this._getFacebook(),this._getEprints(),this._getPrism(),this._getTwitter(),this._getFavicon(),this._getTitle(),this._getLinks(),this.metadata}},{key:"_getHighwire",value:function(){this.metadata.highwire=this._getMetaTags("citation","name","_")}},{key:"_getFacebook",value:function(){this.metadata.facebook=this._getMetaTags("og","property",":")}},{key:"_getTwitter",value:function(){this.metadata.twitter=this._getMetaTags("twitter","name",":")}},{key:"_getDublinCore",value:function(){this.metadata.dc=this._getMetaTags("dc","name",".")}},{key:"_getPrism",value:function(){this.metadata.prism=this._getMetaTags("prism","name",".")}},{key:"_getEprints",value:function(){this.metadata.eprints=this._getMetaTags("eprints","name",".")}},{key:"_getMetaTags",value:function(t,e,n){for(var r={},o=0,i=Array.from(this.document.querySelectorAll("meta"));o<i.length;o++){var a=i[o],s=a.getAttribute(e),u=a.content;if(s){var l=s.match(RegExp("^".concat(t).concat(n,"(.+)$"),"i"));if(l){var c=l[1];r[c]?r[c].push(u):r[c]=[u]}}}return r}},{key:"_getTitle",value:function(){this.metadata.highwire.title?this.metadata.title=this.metadata.highwire.title[0]:this.metadata.eprints.title?this.metadata.title=this.metadata.eprints.title[0]:this.metadata.prism.title?this.metadata.title=this.metadata.prism.title[0]:this.metadata.facebook.title?this.metadata.title=this.metadata.facebook.title[0]:this.metadata.twitter.title?this.metadata.title=this.metadata.twitter.title[0]:this.metadata.dc.title?this.metadata.title=this.metadata.dc.title[0]:this.metadata.title=this.document.title}},{key:"_getLinks",value:function(){this.metadata.link=[{href:this._getDocumentHref()}];for(var t=0,e=Array.from(this.document.querySelectorAll("link"));t<e.length;t++){var n=e[t];if(["alternate","canonical","bookmark","shortlink"].includes(n.rel)){if("alternate"===n.rel){if(n.type&&n.type.match(/^application\/(rss|atom)\+xml/))continue;if(n.hreflang)continue}try{var r=this._absoluteUrl(n.href);this.metadata.link.push({href:r,rel:n.rel,type:n.type})}catch(t){}}}for(var o=0,i=Object.keys(this.metadata.highwire);o<i.length;o++){var a=i[o],s=this.metadata.highwire[a];if("pdf_url"===a){var l,c=u(s);try{for(c.s();!(l=c.n()).done;){var f=l.value;try{this.metadata.link.push({href:this._absoluteUrl(f),type:"application/pdf"})}catch(t){}}}catch(t){c.e(t)}finally{c.f()}}if("doi"===a){var h,d=u(s);try{for(d.s();!(h=d.n()).done;){var p=h.value;"doi:"!==p.slice(0,4)&&(p="doi:".concat(p)),this.metadata.link.push({href:p})}}catch(t){d.e(t)}finally{d.f()}}}for(var g=0,v=Object.keys(this.metadata.dc);g<v.length;g++){var y=v[g],m=this.metadata.dc[y];if("identifier"===y){var b,_=u(m);try{for(_.s();!(b=_.n()).done;){var w=b.value;"doi:"===w.slice(0,4)&&this.metadata.link.push({href:w})}}catch(t){_.e(t)}finally{_.f()}}}var O=this.metadata.dc["relation.ispartof"],S=this.metadata.dc.identifier;if(O&&S){var E=O[O.length-1],x=S[S.length-1],T="urn:x-dc:"+encodeURIComponent(E)+"/"+encodeURIComponent(x);this.metadata.link.push({href:T}),this.metadata.documentFingerprint=T}}},{key:"_getFavicon",value:function(){for(var t=0,e=Array.from(this.document.querySelectorAll("link"));t<e.length;t++){var n=e[t];if(["shortcut icon","icon"].includes(n.rel))try{this.metadata.favicon=this._absoluteUrl(n.href)}catch(t){}}}},{key:"_absoluteUrl",value:function(t){return this.normalizeURI(t,this.baseURI)}},{key:"_getDocumentHref",value:function(){var t=this.document.location.href,e=["http:","https:","file:"],n=new URL(t).protocol;return e.includes(n)?t:this.baseURI&&e.includes(new URL(this.baseURI).protocol)?this.baseURI:t}}]),n}();n.default=y},{"../plugin":70,"../util/url":85,"document-base-uri":5}],75:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../util/url");function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._loaded=new Promise((function(t){var n,r=function n(){var r;window.removeEventListener("documentload",n),window.removeEventListener("documentloaded",n),null===(r=e.eventBus)||void 0===r||r.off("documentloaded",n),t(e)};e.downloadComplete?t(e):(null===(n=e.initializedPromise)||void 0===n||n.then((function(){var t;null===(t=e.eventBus)||void 0===t||t.on("documentloaded",r)})),window.addEventListener("documentloaded",r),window.addEventListener("documentload",r))}))}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"getUri",value:function(){return this._loaded.then((function(t){var e=s(t);return e||(e=a(t.pdfDocument.fingerprint)),e}))}},{key:"getMetadata",value:function(){return this._loaded.then((function(t){var e=document.title;t.metadata&&t.metadata.has("dc:title")&&"Untitled"!==t.metadata.get("dc:title")?e=t.metadata.get("dc:title"):t.documentInfo&&t.documentInfo.Title&&(e=t.documentInfo.Title);var n=[{href:a(t.pdfDocument.fingerprint)}],r=s(t);return r&&n.push({href:r}),{title:e,link:n,documentFingerprint:t.pdfDocument.fingerprint}}))}}]),t}();function a(t){return"urn:x-pdf:"+String(t)}function s(t){var e=(0,r.normalizeURI)(t.url);return 0!==e.indexOf("file://")?e:null}n.default=i},{"../util/url":85}],76:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=l(t("lodash.debounce")),o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==c(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(t("../anchoring/pdf")),i=l(t("../pdfjs-rendering-states")),a=l(t("../plugin")),s=l(t("./pdf-metadata"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){p(n,a.default);var e=v(n);function n(t,o){var i;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),(i=e.call(this,t,o)).annotator=null;var a=window;return i.pdfViewer=a.PDFViewerApplication.pdfViewer,i.pdfViewer.viewer.classList.add("has-transparent-text-layer"),i.pdfMetadata=new s.default(a.PDFViewerApplication),i.observer=new MutationObserver((0,r.default)((function(){return i._update()}),100)),i.observer.observe(i.pdfViewer.viewer,{attributes:!0,attributeFilter:["data-loaded"],childList:!0,subtree:!0}),i}return function(t,e,n){e&&d(t.prototype,e),n&&d(t,n)}(n,[{key:"pluginInit",value:function(){this.annotator.anchoring=o}},{key:"destroy",value:function(){this.pdfViewer.viewer.classList.remove("has-transparent-text-layer"),this.observer.disconnect()}},{key:"uri",value:function(){return this.pdfMetadata.getUri()}},{key:"getMetadata",value:function(){return this.pdfMetadata.getMetadata()}},{key:"_update",value:function(){for(var t=this,e=[],n=this.pdfViewer.pagesCount,r=0;r<n;r++){var o,a=this.pdfViewer.getPageView(r);if(null===(o=a.textLayer)||void 0===o?void 0:o.renderingDone)switch(a.renderingState){case i.default.INITIAL:a.textLayer=null;break;case i.default.FINISHED:var s=a.div.querySelector(".annotator-placeholder");null==s||s.parentNode.removeChild(s)}}var u,l=f(this.annotator.anchors);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c.highlights){if(e.includes(c.annotation))continue;for(var h=0;h<c.highlights.length;h++){var d=c.highlights[h];if(!document.body.contains(d)){c.highlights.splice(h,1),delete c.range,e.push(c.annotation);break}}}}}catch(t){l.e(t)}finally{l.f()}e.map((function(e){return t.annotator.anchor(e)}))}}]),n}();n.default=b},{"../anchoring/pdf":46,"../pdfjs-rendering-states":69,"../plugin":70,"./pdf-metadata":75,"lodash.debounce":34}],77:[function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return t.focusNode===t.anchorNode?t.focusOffset<t.anchorOffset:t.getRangeAt(0).startContainer===t.focusNode}function a(t,e){if(e===t.startContainer||e===t.endContainer)return!0;var n=e.ownerDocument.createRange();n.selectNode(e);var r=t.compareBoundaryPoints(Range.START_TO_START,n)<=0,o=t.compareBoundaryPoints(Range.END_TO_END,n)>=0;return n.detach(),r&&o}function s(t,e){for(var n,r=t.commonAncestorContainer,o=r.ownerDocument.createNodeIterator(r,NodeFilter.SHOW_ALL,null,!1);n=o.nextNode();)a(t,n)&&e(n)}function u(t){var e=/^\s*$/,n=[];s(t,(function(t){t.nodeType!==Node.TEXT_NODE||t.textContent.match(e)||n.push(t)}));var r=[];return n.forEach((function(e){var n=e.ownerDocument.createRange();if(n.selectNodeContents(e),e===t.startContainer&&n.setStart(e,t.startOffset),e===t.endContainer&&n.setEnd(e,t.endOffset),!n.collapsed){var o=Array.from(n.getClientRects());n.detach(),r=r.concat(o)}})),r}Object.defineProperty(n,"__esModule",{value:!0}),n.isSelectionBackwards=i,n.isNodeInRange=a,n.getTextBoundingBoxes=u,n.selectionFocusRect=function(t){if(t.isCollapsed)return null;var e=u(t.getRangeAt(0));return 0===e.length?null:i(t)?e[0]:e[e.length-1]},n.itemsForRange=function(t,e){var n=new Set,o=new Set;return s(t,(function(t){for(var r=t;r&&!n.has(r);){n.add(r);var i=e(r);i&&o.add(i),r=r.parentNode}})),r(o)}},{}],78:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e,n=o.listen(t,["mousedown","mouseup","selectionchange"]).filter((function(t){return"mousedown"===t.type||"mouseup"===t.type?(e="mousedown"===t.type,!1):!e}));return o.merge([o.buffer(10,o.listen(t,["mouseup"])),o.buffer(100,n),o.delay(0,o.Observable.of({}))]).map((function(){return function(t){var e=t.getSelection();return!e.rangeCount||e.getRangeAt(0).collapsed?null:e.getRangeAt(0)}(t)}))};var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(t("./util/observable"));function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}},{"./util/observable":83}],79:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n=t.querySelectorAll("[data-hypothesis-trigger]");function r(t){e(),t.stopPropagation()}Array.from(n).forEach((function(t){t.addEventListener("click",r)}))}},{}],80:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=c(t("hammerjs")),o=c(t("./annotation-counts")),i=c(t("./sidebar-trigger")),a=c(t("../shared/bridge-events")),s=c(t("./features")),u=c(t("./host")),l=t("./toolbar");function c(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S(t);if(e){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E={BucketBar:{container:".annotator-frame"}},x=function(t){b(n,u.default);var e=w(n);function n(t,r){var o;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),("clean"===r.theme||r.externalContainerSelector)&&delete r.pluginClasses.BucketBar,o=e.call(this,t,g(g({},E),r)),(r.openSidebar||r.annotations||r.query||r.group)&&o.subscribe("panelReady",(function(){return o.show()})),o.plugins.BucketBar&&o.plugins.BucketBar.element.on("click",(function(){return o.show()}));var i=document.createElement("div");o.toolbar=new l.ToolbarController(i,{createAnnotation:function(){return o.createAnnotation()},setSidebarOpen:function(t){return t?o.show():o.hide()},setHighlightsVisible:function(t){return o.setAllVisibleHighlights(t)}}),o.toolbar.useMinimalControls="clean"===r.theme,o.frame?(o.frame.prepend(i),o.toolbarWidth=o.toolbar.getWidth()):o.toolbarWidth=0,o._gestureState={initial:null,final:null},o._setupGestures(),o.hide();var a=h(r.services||[],1)[0];return a&&(o.onLoginRequest=a.onLoginRequest,o.onLogoutRequest=a.onLogoutRequest,o.onSignupRequest=a.onSignupRequest,o.onProfileRequest=a.onProfileRequest,o.onHelpRequest=a.onHelpRequest),o.onLayoutChange=r.onLayoutChange,o._notifyOfLayoutChange(!1),o._setupSidebarEvents(),o}return function(t,e,n){e&&y(t.prototype,e),n&&y(t,n)}(n,[{key:"destroy",value:function(){var t;null===(t=this._hammerManager)||void 0===t||t.destroy(),m(S(n.prototype),"destroy",this).call(this)}},{key:"_setupSidebarEvents",value:function(){var t=this;(0,o.default)(document.body,this.crossframe),(0,i.default)(document.body,(function(){return t.show()})),s.default.init(this.crossframe),this.crossframe.on("showSidebar",(function(){return t.show()})),this.crossframe.on("hideSidebar",(function(){return t.hide()})),[[a.default.LOGIN_REQUESTED,this.onLoginRequest],[a.default.LOGOUT_REQUESTED,this.onLogoutRequest],[a.default.SIGNUP_REQUESTED,this.onSignupRequest],[a.default.PROFILE_REQUESTED,this.onProfileRequest],[a.default.HELP_REQUESTED,this.onHelpRequest]].forEach((function(e){var n=h(e,2),r=n[0],o=n[1];o&&t.crossframe.on(r,(function(){return o()}))}))}},{key:"_resetGestureState",value:function(){this._gestureState={initial:null,final:null}}},{key:"_setupGestures",value:function(){var t=this.toolbar.sidebarToggleButton;t&&(t.addEventListener("touchmove",(function(t){return t.preventDefault()})),this._hammerManager=new r.default.Manager(t).on("panstart panend panleft panright",this._onPan.bind(this)),this._hammerManager.add(new r.default.Pan({direction:r.default.DIRECTION_HORIZONTAL})))}},{key:"_updateLayout",value:function(){var t=this;this.renderFrame||(this.renderFrame=requestAnimationFrame((function(){if(t.renderFrame=null,t._gestureState.final!==t._gestureState.initial&&t.frame){var e=t._gestureState.final,n=-e;t.frame.style.marginLeft="".concat(e,"px"),n>=280&&(t.frame.style.width="".concat(n,"px")),t._notifyOfLayoutChange()}})))}},{key:"_notifyOfLayoutChange",value:function(t){var e=this.frame&&this.toolbar.getWidth()||0,n=this.frame||this.externalFrame,r=n.getBoundingClientRect(),o=window.getComputedStyle(n),i=parseInt(o.width),a=parseInt(o.marginLeft),s=e;"boolean"==typeof t?t&&(s+=i):(a<280?s-=a:s+=i,t=s>e);var u={expanded:t,width:t?s:e,height:r.height};this.onLayoutChange&&this.onLayoutChange(u),this.publish("sidebarLayoutChanged",[u])}},{key:"_onPan",value:function(t){var e=this.frame;if(e)switch(t.type){case"panstart":this._resetGestureState(),e.classList.add("annotator-no-transition"),e.style.pointerEvents="none",this._gestureState.initial=parseInt(getComputedStyle(e).marginLeft);break;case"panend":e.classList.remove("annotator-no-transition"),e.style.pointerEvents="",null===this._gestureState.final||this._gestureState.final<=-280?this.show():this.hide(),this._resetGestureState();break;case"panleft":case"panright":if("number"!=typeof this._gestureState.initial)return;var n=this._gestureState.initial,r=t.deltaX;this._gestureState.final=Math.min(Math.round(n+r),0),this._updateLayout()}}},{key:"show",value:function(){if(this.crossframe.call("sidebarOpened"),this.frame){var t=this.frame.getBoundingClientRect().width;this.frame.style.marginLeft="".concat(-1*t,"px"),this.frame.classList.remove("annotator-collapsed")}this.toolbar.sidebarOpen=!0,"whenSidebarOpen"===this.options.showHighlights&&this.setVisibleHighlights(!0),this._notifyOfLayoutChange(!0)}},{key:"hide",value:function(){this.frame&&(this.frame.style.marginLeft="",this.frame.classList.add("annotator-collapsed")),this.toolbar.sidebarOpen=!1,"whenSidebarOpen"===this.options.showHighlights&&this.setVisibleHighlights(!1),this._notifyOfLayoutChange(!1)}},{key:"setAllVisibleHighlights",value:function(t){this.crossframe.call("setVisibleHighlights",t)}}]),n}();n.default=x},{"../shared/bridge-events":95,"./annotation-counts":52,"./features":61,"./host":65,"./sidebar-trigger":79,"./toolbar":81,hammerjs:32}],81:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ToolbarController=void 0;var r,o=t("preact"),i=(r=t("./components/toolbar"))&&r.__esModule?r:{default:r};function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=n.createAnnotation,a=n.setSidebarOpen,s=n.setHighlightsVisible;this._container=e,this._container.className="annotator-toolbar",this._useMinimalControls=!1,this._newAnnotationType="note",this._highlightsVisible=!1,this._sidebarOpen=!1,this._closeSidebar=function(){return a(!1)},this._toggleSidebar=function(){return a(!r._sidebarOpen)},this._toggleHighlights=function(){return s(!r._highlightsVisible)},this._createAnnotation=function(){i(),a(!0)},this._sidebarToggleButton=(0,o.createRef)(),this.render()}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"getWidth",value:function(){return this._container.getBoundingClientRect().width}},{key:"render",value:function(){(0,o.render)((0,o.createElement)(i.default,{closeSidebar:this._closeSidebar,createAnnotation:this._createAnnotation,newAnnotationType:this._newAnnotationType,isSidebarOpen:this._sidebarOpen,showHighlights:this._highlightsVisible,toggleHighlights:this._toggleHighlights,toggleSidebar:this._toggleSidebar,toggleSidebarRef:this._sidebarToggleButton,useMinimalControls:this.useMinimalControls}),this._container)}},{key:"useMinimalControls",set:function(t){this._useMinimalControls=t,this.render()},get:function(){return this._useMinimalControls}},{key:"sidebarOpen",set:function(t){this._sidebarOpen=t,this.render()},get:function(){return this._sidebarOpen}},{key:"newAnnotationType",set:function(t){this._newAnnotationType=t,this.render()},get:function(){return this._newAnnotationType}},{key:"highlightsVisible",set:function(t){this._highlightsVisible=t,this.render()},get:function(){return this._highlightsVisible}},{key:"sidebarToggleButton",get:function(){return this._sidebarToggleButton.current}}]),t}();n.ToolbarController=s},{"./components/toolbar":55,preact:35}],82:[function(t,e,n){"use strict";function r(t){var e=!t.classList.contains("h-sidebar-iframe"),n=t.hasAttribute("enable-annotation");return e&&n}Object.defineProperty(n,"__esModule",{value:!0}),n.findFrames=function(t){return Array.from(t.getElementsByTagName("iframe")).filter(r)},n.hasHypothesis=function(t){return!0===t.contentWindow.__hypothesis_frame},n.injectHypothesis=function(t,e,n){var r=document.createElement("script");r.className="js-hypothesis-config",r.type="application/json",r.innerText=JSON.stringify(n);var o=e,i=document.createElement("script");i.className="js-hypothesis-embed",i.async=!0,i.src=o,t.contentDocument.body.appendChild(r),t.contentDocument.body.appendChild(i)},n.isAccessible=function(t){try{return!!t.contentDocument}catch(t){return!1}},n.isDocumentReady=function(t,e){"loading"===t.contentDocument.readyState?t.contentDocument.addEventListener("DOMContentLoaded",(function(){e()})):e()},n.isLoaded=function(t,e){"complete"!==t.contentDocument.readyState?t.addEventListener("load",(function(){e()})):e()}},{}],83:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.listen=function(t,e){return new o.default((function(n){var r=function(t){n.next(t)};return e.forEach((function(e){t.addEventListener(e,r)})),function(){e.forEach((function(e){t.removeEventListener(e,r)}))}}))},n.delay=function(t,e){return new o.default((function(n){var r=[],o=e.subscribe({next:function(e){var o=setTimeout((function(){r=r.filter((function(t){return t!==o})),n.next(e)}),t);r.push(o)}});return function(){r.forEach(clearTimeout),o.unsubscribe()}}))},n.buffer=function(t,e){return new o.default((function(n){var r,o;function i(){n.next(r)}var a=e.subscribe({next:function(e){r=e,clearTimeout(o),o=setTimeout(i,t)}});return function(){a.unsubscribe(),clearTimeout(o)}}))},n.merge=function(t){return new o.default((function(e){var n=t.map((function(t){return t.subscribe({next:function(t){e.next(t)}})}));return function(){n.forEach((function(t){t.unsubscribe()}))}}))},n.drop=function(t,e){var n=0;return t.filter((function(){return++n>e}))},Object.defineProperty(n,"Observable",{enumerable:!0,get:function(){return o.default}});var r,o=(r=t("zen-observable"))&&r.__esModule?r:{default:r}},{"zen-observable":42}],84:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createShadowRoot=function(t){if(!t.attachShadow)return t;var e=t.attachShadow({mode:"open"});return function(t){var e=Array.from(document.styleSheets).map((function(t){return t.href})).filter((function(t){return(t||"").match(/annotator\.css/)})),n=document.createElement("style");n.textContent=e.map((function(t){return'@import "'.concat(t,'";')})).join("\n"),t.appendChild(n)}(e),e}},{}],85:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeURI=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default,n=new URL(t,e).href;return n.toString().replace(/#.*/,"")};var r,o=(r=t("document-base-uri"))&&r.__esModule?r:{default:r}},{"document-base-uri":5}],86:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path fill="currentColor" fill-rule="nonzero" d="M15 0c.27 0 .505.099.703.297A.961.961 0 0116 1v15l-4-3H1a.974.974 0 01-.703-.29A.953.953 0 010 12V1C0 .719.096.482.29.29A.966.966 0 011 0h14zM7 3l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C4.156 5.229 4 6 4 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188C4.729 8.854 5.082 9 5.5 9c.417 0 .77-.146 1.063-.438C6.854 8.271 7 7.918 7 7.5c0-.417-.146-.77-.438-1.063A1.447 1.447 0 005.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L7 4V3zm5 0l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C9.156 5.229 9 6 9 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188c.291.291.645.437 1.062.437.417 0 .77-.146 1.063-.438.291-.291.437-.645.437-1.062 0-.417-.146-.77-.438-1.063A1.447 1.447 0 0010.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L12 4V3z"/>\n</svg>\n'},{}],87:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false" class="Icon Icon--cancel"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 8l3.536-3.536L8 8 4.464 4.464 8 8zm0 0l-3.536 3.536L8 8l3.536 3.536L8 8z"></path></g></svg>\n'},{}],88:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 12L6 8l4-4"></path></g></svg>\n'},{}],89:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false" class="Icon Icon--caret-right"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 4l4 4-4 4"></path></g></svg>\n'},{}],90:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.73 12.973A9.89 9.89 0 0 1 8 13c-3.866 0-7-2.239-7-5 0-.753.233-1.467.65-2.107m5.62-2.866A9.89 9.89 0 0 1 8 3c3.866 0 7 2.239 7 5 0 .753-.233 1.467-.65 2.107M1 1l14 14L1 1z"></path></g></svg>\n'},{}],91:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15H1h11zm-.5-6v2l-1 1v-2l1-1zm.5-7v6h-2V2h2zm0-1h-2 2zm0 8h-2 2z"></path></g></svg>\n'},{}],92:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 15h6l8-6V1H1v14zm6-1V9h7"></path></g></svg>\n'},{}],93:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="15" height="8" viewBox="0 0 15 8" aria-hidden="true" focusable="false"><path d="M0 8 L7 0 L15 8" stroke="currentColor" strokeWidth="2" /></svg>\n'},{}],94:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 13c3.866 0 7-2.239 7-5s-3.134-5-7-5-7 2.239-7 5 3.134 5 7 5zm0-4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></g></svg>\n'},{}],95:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={FEATURE_FLAGS_UPDATED:"featureFlagsUpdated",HELP_REQUESTED:"helpRequested",LOGIN_REQUESTED:"loginRequested",LOGOUT_REQUESTED:"logoutRequested",PROFILE_REQUESTED:"profileRequested",PUBLIC_ANNOTATION_COUNT_CHANGED:"publicAnnotationCountChanged",SIGNUP_REQUESTED:"signupRequested"}},{}],96:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("./frame-rpc"))&&r.__esModule?r:{default:r};function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.links=[],this.channelListeners={},this.onConnectListeners=[]}return function(t,e,n){e&&l(t.prototype,e),n&&l(t,n)}(t,[{key:"destroy",value:function(){Array.from(this.links).map((function(t){return t.channel.destroy()}))}},{key:"createChannel",value:function(t,e,n){var r=this,i=null,a=!1,l=function(){a||(a=!0,Array.from(r.onConnectListeners).forEach((function(e){return e.call(null,i,t)})))},c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({connect:function(t,e){t===n&&(e(),l())}},this.channelListeners);return(i=new o.default(window,t,e,c)).call("connect",n,l),this.links.push({channel:i,window:t}),i}},{key:"call",value:function(t){for(var e,n=this,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];"function"==typeof o[o.length-1]&&(e=o[o.length-1],o=o.slice(0,-1));var s=function(t){return function(e){throw t.destroy(),n.links=Array.from(n.links).filter((function(e){return e.channel!==t})).map((function(t){return t})),e}},u=this.links.map((function(e){return new Promise((function(n,r){var a=setTimeout((function(){return n(null)}),1e3);try{var s;return(s=e.channel).call.apply(s,[t].concat(i(Array.from(o)),[function(t,e){return clearTimeout(a),t?r(t):n(e)}]))}catch(t){return r(t)}})).catch(s(e.channel))})),l=Promise.all(u);return e&&(l=l.then((function(t){return e(null,t)})).catch((function(t){return e(t)}))),l}},{key:"on",value:function(t,e){if(this.channelListeners[t])throw new Error("Listener '".concat(t,"' already bound in Bridge"));return this.channelListeners[t]=e,this}},{key:"off",value:function(t){return delete this.channelListeners[t],this}},{key:"onConnect",value:function(t){return this.onConnectListeners.push(t),this}}]),t}();n.default=c},{"./frame-rpc":101}],97:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeKeyName=function(t){var e={Left:"ArrowLeft",Up:"ArrowUp",Down:"ArrowDown",Right:"ArrowRight",Spacebar:" ",Del:"Delete"};return e[t]?e[t]:t}},{}],98:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=c,n.registerIcons=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.reset,r=void 0!==n&&n;r&&(l={}),Object.assign(l,t)},n.availableIcons=function(){return l};var r=s(t("classnames")),o=t("preact"),i=t("preact/hooks"),a=s(t("prop-types"));function s(t){return t&&t.__esModule?t:{default:t}}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var l={};function c(t){var e=t.name,n=t.className,a=void 0===n?"":n,s=t.inline,c=void 0!==s&&s,f=t.title,h=void 0===f?"":f;if(!l[e])throw new Error('Icon name "'.concat(e,'" is not registered'));var d=l[e],p=(0,i.useRef)();(0,i.useLayoutEffect)((function(){var t=p.current.querySelector("svg");t&&t.setAttribute("class",a)}),[a,d]);var g={};return h&&(g.title=h),(0,o.createElement)("span",u({className:(0,r.default)("svg-icon",{"svg-icon--inline":c}),dangerouslySetInnerHTML:{__html:d},ref:p},g))}c.propTypes={name:a.default.string.isRequired,className:a.default.string,inline:a.default.bool,title:a.default.string}},{classnames:2,preact:35,"preact/hooks":36,"prop-types":38}],99:[function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.target=e,this.server=!1,this.origin="*",this.requestInProgress=!1,this.onDiscovery=null,void 0!==n.server&&(this.server=n.server),void 0!==n.origin&&(this.origin=n.origin),this._onMessage=this._onMessage.bind(this)}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"startDiscovery",value:function(t){if(this.onDiscovery)throw new Error("Discovery is already in progress. Call stopDiscovery() first");this.onDiscovery=t,this.target.addEventListener("message",this._onMessage,!1),this._beacon()}},{key:"stopDiscovery",value:function(){this.onDiscovery=null,this.target.removeEventListener("message",this._onMessage)}},{key:"_beacon",value:function(){var t;t=this.server?"__cross_frame_dhcp_offer":"__cross_frame_dhcp_discovery";for(var e=[this.target.top];e.length>0;){var n=e.shift();n!==this.target&&n.postMessage(t,this.origin);for(var r=0;r<n.frames.length;r++)e.push(n.frames[r])}}},{key:"_onMessage",value:function(t){var e=t.source,n=t.data,o=t.origin;("null"===o||o.match("moz-extension:")||"moz-extension:"===window.location.protocol)&&(o="*");var i="string"==typeof n&&n.match(/^__cross_frame_dhcp_(discovery|offer|request|ack)(?::(\d+))?$/);if(i){var a=r(i,3),s=a[1],u=a[2],l=this._processMessage(s,u,o),c=l.reply,f=l.discovered,h=l.token;c&&e.postMessage("__cross_frame_dhcp_"+c,o),f&&this.onDiscovery&&this.onDiscovery.call(null,e,o,h)}}},{key:"_processMessage",value:function(t,e,n){var r=null,o=!1;if(this.server){if("discovery"===t)r="offer";else if("request"===t)e=this.generateToken(),r="ack:".concat(e),o=!0;else if("offer"===t||"ack"===t)throw new Error("A second Discovery server has been detected at ".concat(n,".\n This is unsupported and will cause unexpected behaviour."))}else"offer"===t?this.requestInProgress||(this.requestInProgress=!0,r="request"):"ack"===t&&(this.requestInProgress=!1,o=!0);return{reply:r,discovered:o,token:e}}},{key:"generateToken",value:function(){return Math.random().toString().replace(/\D/g,"")}}]),t}();n.default=s},{}],100:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.closest=function(t,e){for(;t;){if(t.matches(e))return t;t=t.parentElement}return null}},{}],101:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var o="1.0.0";function i(t,e,n,o){var i=this;if(this.src=t,this.dst=e,"*"===n)this.origin="*";else{var a=new URL(n);this.origin=a.protocol+"//"+a.host}this._sequence=0,this._callbacks={},this._onmessage=function(t){i._destroyed||i.dst===t.source&&("*"!==i.origin&&t.origin!==i.origin||t.data&&"object"===r(t.data)&&"frame-rpc"===t.data.protocol&&Array.isArray(t.data.arguments)&&i._handle(t.data))},this.src.addEventListener("message",this._onmessage),this._methods=("function"==typeof o?o(this):o)||{}}i.prototype.destroy=function(){this._destroyed=!0,this.src.removeEventListener("message",this._onmessage)},i.prototype.call=function(t){var e=[].slice.call(arguments,1);return this.apply(t,e)},i.prototype.apply=function(t,e){if(!this._destroyed){var n=this._sequence++;"function"==typeof e[e.length-1]&&(this._callbacks[n]=e[e.length-1],e=e.slice(0,-1)),this.dst.postMessage({protocol:"frame-rpc",version:o,sequence:n,method:t,arguments:e},this.origin)}},i.prototype._handle=function(t){var e=this;if(!e._destroyed)if(t.hasOwnProperty("method")){if(!this._methods.hasOwnProperty(t.method))return;var n=t.arguments.concat((function(){e.dst.postMessage({protocol:"frame-rpc",version:o,response:t.sequence,arguments:[].slice.call(arguments)},e.origin)}));this._methods[t.method].apply(this._methods,n)}else if(t.hasOwnProperty("response")){var r=this._callbacks[t.response];delete this._callbacks[t.response],r&&r.apply(null,t.arguments)}}},{}],102:[function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(n,"__esModule",{value:!0}),n.jsonConfigsFrom=function(t){for(var e={},n=t.querySelectorAll("script.js-hypothesis-config"),o=0;o<n.length;o++){var i=void 0;try{i=JSON.parse(n[o].textContent||"")}catch(t){console.warn("Could not parse settings from js-hypothesis-config tags",t),i={}}r(e,i)}return e}},{}],103:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.matchShortcut=u,n.installShortcut=l,n.useShortcut=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.rootElement,i=void 0===o?document.body:o;(0,r.useEffect)((function(){if(t)return l(t,e,{rootElement:i})}),[t,e,i])};var r=t("preact/hooks"),o=t("./browser-compatibility-utils.js");function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s={alt:1,ctrl:2,meta:4,shift:8};function u(t,e){var n,r=0,a=null,u=i(e.split("+").map((function(t){return t.toLowerCase()})));try{for(u.s();!(n=u.n()).done;){var l=n.value,c=s[l];if(c)r|=c;else{if(null!==a)throw new Error("Multiple non-modifier keys specified");a=l}}}catch(t){u.e(t)}finally{u.f()}if(!a)throw new Error("Invalid shortcut: ".concat(e));return((t.ctrlKey?s.ctrl:0)|(t.metaKey?s.meta:0)|(t.altKey?s.alt:0)|(t.shiftKey?s.shift:0))===r&&(0,o.normalizeKeyName)(t.key).toLowerCase()===a}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.rootElement,o=void 0===r?document.body:r,i=function(n){u(n,t)&&e(n)};return o.addEventListener("keydown",i),function(){return o.removeEventListener("keydown",i)}}},{"./browser-compatibility-utils.js":97,"preact/hooks":36}],104:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.toBoolean=function(t){if("string"==typeof t&&"false"===t.trim().toLocaleLowerCase())return!1;var e=Number(t);return isNaN(e)?"string"==typeof t:Boolean(e)},n.toInteger=function(t){return parseInt(t)},n.toObject=function(t){return"object"===r(t)&&null!==t?t:{}},n.toString=function(t){return t&&"function"==typeof t.toString?t.toString():""}},{}],105:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var r={};function o(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n.join();i in r||((t=console).warn.apply(t,n),r[i]=!0)}o.reset=function(){r={}}},{}]},{},[67]);
//# sourceMappingURL=annotator.bundle.js.map